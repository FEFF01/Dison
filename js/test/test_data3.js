export default (function a(){
(function(t){function e(e){for(var i,s,r=e[0],c=e[1],l=e[2],h=0,d=[];h<r.length;h++)s=r[h],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},o={index:0},a=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("5bba")},"0897":function(t,e,n){},1:function(t,e){},1257:function(t,e,n){"use strict";var i=n("e13a"),o=n.n(i);o.a},"153a":function(t,e,n){},"17b6":function(t,e,n){},"183a":function(t,e,n){"use strict";var i=n("81d6"),o=n.n(i);o.a},"187a":function(t,e,n){"use strict";var i=n("3c83"),o=n.n(i);o.a},"1d12":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"nav-item",class:{dragging:t.dragging,editor:t.is_edit_mode,editing:t.editing},style:t.layout},[t.is_edit_mode?n("button",{staticClass:"btn-edit icon-pencil",class:"edit-"+t.type+"-btn",on:{click:function(e){return t.$emit("edit")}}}):t._e(),"strip"===t.type?n("navitem-strip",t._b({staticClass:"navitem-content",on:{update:t.update}},"navitem-strip",t.bind_data,!1)):t._e(),"block"===t.type?n("navitem-block",t._b({staticClass:"navitem-content",on:{update:t.update}},"navitem-block",t.bind_data,!1)):t._e(),"cite"===t.type?n("navitem-cite",t._b({staticClass:"navitem-content",on:{update:t.update}},"navitem-cite",t.bind_data,!1)):t._e(),"box"===t.type?n("navitem-box",t._b({staticClass:"navitem-content",on:{resize:t.resize,update:t.update,pop:t.pop,edit:function(e){return t.$emit("edit",arguments[0])}}},"navitem-box",t.bind_data,!1)):t._e()],1)},o=[],a=(n("99af"),n("a9e3"),n("b680"),n("2b0e")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box",style:{overflow:t.drag_target?"visible":""}},[t.title?n("p",{staticClass:"box-title",attrs:{title:t.title}},[t._v(t._s(t.title))]):t._e(),n("nav",{ref:"box_content",staticClass:"box-content"},[t._l(t.content,(function(e){return[n("navigation-item",t._b({key:e._id,attrs:{is_edit_mode:t.is_edit_mode},on:{update:function(t){e[arguments[0]]=arguments[1]},edit:function(n){return t.$emit("edit",e)}}},"navigation-item",e,!1))]}))],2)])},r=[],c=(n("c975"),n("a434"),n("d3b7"),n("5530")),l=n("b85c"),u=n("2f62"),h=n("f556"),d={mounted:function(){this.$emit("update","_vue",this)},methods:{open:function(t){!this.is_edit_mode&&this.$store.state.setting.open_link_on_external||(t.preventDefault(),this.is_edit_mode||this.$store.commit("new_tab",{title:this.title,icon:this.icon,url:this.content}))}},props:{content:[Array,String],title:String,colspan:Number,rowspan:Number,icon:String,data:Object,width:Number,height:Number,editing:Boolean,is_edit_mode:Boolean}},p=a["a"].extend({mixins:[d],components:{NavigationItem:function(){return Promise.resolve().then(n.bind(null,"1d12"))}},mounted:function(){this.mutexBox=new h["b"](this.$refs.box_content,this.content,this.options),this.is_edit_mode||this.mutexBox.disable(),this.$el._receive=this.receive},watch:{editing:function(t,e){t||this.$emit("update","zIndex",void 0)},width:function(t,e){},is_edit_mode:function(t,e){t?this.mutexBox.activate():this.mutexBox.disable()},ncols:function(t,e){this.mutexBox.setNCols(t)},options:function(t,e){this.mutexBox.options=t,this.mutexBox.resize(),this.resize()}},methods:{del:function(t){this.content.indexOf(t);if(-1!==t)return this.mutexBox.remove(t),this.content.splice(this.content.indexOf(t),1),!0},receive:function(t,e,n,i){if("string"===typeof i.content){var o=this.$el.getBoundingClientRect(),a=this.mutexBox.cellSize,s=this.options.space,r=s.left,c=s.right,l=s.top,u=s.bottom,h=8*a-r-c,d=2*a-l-u,p={content:i.content,title:i.title,icon:i.icon,type:"strip",colspan:8,rowspan:2,left:n.left-o.left-(h-n.width)*(e.clientX-n.left)/n.width,top:n.top-o.top-this.$refs.box_content.offsetTop-(d-n.height)*(e.clientY-n.top)/n.height,width:h,height:d,dragging:!0,editing:!1,zIndex:this.getTopIndex(),_id:this.getUniqueID()};return this.content.push(p),this.mutexBox.receive(t,e,p),this.editing||this.$emit("update","zIndex",void 0),p}},on_pick:function(t,e,n){if(this.$emit("update","zIndex",this.editing?this.getTopIndex():void 0),n.zIndex=this.getTopIndex(),"BUTTON"===e.target.tagName)return!0;this.drag_target=n},on_move:function(t,e,n){var i=e.target.getParentNode((function(t){return"function"===typeof t._receive}),5);if(i&&!this.$el.getParentNode(i)&&i._receive(t,e,n._vue.$el.getBoundingClientRect(),n))return this.content.splice(this.content.indexOf(n),1),this.drag_target=null,this.$nextTick(this.resize),!0},on_stay:function(t,e,n,i){var o=n.left,a=n.top,s=n.width,r=n.height,c=-this.$refs.box_content.offsetTop,l=this.height+c,u=0,h=this.width;if(this.$nextTick(this.resize),a-c<-r/2||l-a<r/2||o-u<-s/2||h-o<s/2)return this.content.splice(this.content.indexOf(n),1),this.drag_target=null,this.$emit("pop",t,e,n._vue.$el.getBoundingClientRect(),n),!0},on_drop:function(t,e,n,i){return this.on_stay(void 0,e,n,i)},resize:function(){var t,e=this.mutexBox.cellSize,n=0,i=Object(l["a"])(this.content);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=o.top+o.height;a>n&&(n=a)}}catch(s){i.e(s)}finally{i.f()}n+=this.$refs.box_content.offsetTop+e,(n>this.height||n<this.height-2*e)&&this.$emit("resize",{bottom:n-this.height})}},computed:Object(c["a"])({},Object(u["b"])(["getUniqueID","getTopIndex"]),{ncols:function(){return 3*this.colspan|0},space:function(){var t=Math.pow(this.width,1.09)/this.ncols*.08;return{left:t,right:t,top:t,bottom:t}},options:function(){return{client_width:this.width,space:this.space,ncols:this.ncols,onPick:this.on_pick,onMove:this.on_move,onDrop:this.on_drop,onStay:this.on_stay}}}),data:function(){return{drag_target:null}}}),f=p,_=(n("f732"),n("2877")),v=Object(_["a"])(f,s,r,!1,null,"4a5563ae",null),m=v.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"strip",attrs:{title:t.title,href:t.content,target:"_blank"},on:{click:t.open}},[n("img",{directives:[{name:"catch-icon",rawName:"v-catch-icon"}],attrs:{src:t.icon}}),n("span",[t._v(t._s(t.title))])])},w=[],b=a["a"].extend({mounted:function(){},mixins:[d],data:function(){return{}}}),y=b,k=(n("6c95"),Object(_["a"])(y,g,w,!1,null,"1902dc8e",null)),x=k.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"block",style:{backgroundImage:"url("+(t.store[t.content]||"")+")"},attrs:{title:t.title,href:t.content,target:"_blank"},on:{click:t.open}},[n("em",{staticClass:"block-title"},[n("img",{directives:[{name:"catch-icon",rawName:"v-catch-icon"}],attrs:{src:t.icon}}),n("span",[t._v(t._s(t.title))])])])},E=[],S=a["a"].extend({mixins:[d],computed:Object(c["a"])({},Object(u["c"])({store:"cache"})),data:function(){return{default_icon:""}}}),T=S,C=(n("2e7a"),Object(_["a"])(T,O,E,!1,null,"d22b58b6",null)),$=C.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cite",class:t.is_edit_mode&&"editor"},[n("iframe",{staticClass:"cite-content",attrs:{src:t.content}}),n("a",{staticClass:"cite-title",attrs:{href:t.content,title:t.title,target:"_blank"},on:{click:t.open}},[n("img",{directives:[{name:"catch-icon",rawName:"v-catch-icon"}],attrs:{src:t.icon}}),t._v(" "+t._s(t.title)+" ")])])},M=[],A=a["a"].extend({mixins:[d],data:function(){return{}}}),I=A,j=(n("ea62"),Object(_["a"])(I,N,M,!1,null,"49773553",null)),P=j.exports,L=a["a"].extend({mounted:function(){},data:function(){return{}},components:{NavitemBox:m,NavitemStrip:x,NavitemBlock:$,NavitemCite:P},computed:{bind_data:function(){return{icon:this.icon,title:this.title,content:this.content,colspan:this.colspan,rowspan:this.rowspan,width:this.width,height:this.height,editing:this.editing,is_edit_mode:this.is_edit_mode}},layout:function(){return{zIndex:this.zIndex,width:Math.round(this.width)+"px",height:Math.round(this.height)+"px",left:this.left.toFixed(2)+"px",top:this.top.toFixed(2)+"px"}}},methods:{pop:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.$emit.apply(this,["pop"].concat(e))},update:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.$emit.apply(this,["update"].concat(e))},resize:function(t){this.$emit("resize",t)}},props:{icon:String,content:[Array,String],title:String,colspan:Number,rowspan:Number,dragging:Boolean,editing:Boolean,left:Number,top:Number,width:Number,height:Number,zIndex:Number,col:Number,row:Number,type:String,data:Object,is_edit_mode:Boolean,_vue:Object,_id:Number}}),U=L,R=(n("41f0"),Object(_["a"])(U,i,o,!1,null,"895f3b3c",null));e["default"]=R.exports},2:function(t,e){},"24b6":function(t,e,n){},"256a":function(t,e,n){"use strict";var i=n("0897"),o=n.n(i);o.a},"275f":function(t,e,n){},"2bbe":function(t,e,n){"use strict";var i=n("fac5"),o=n.n(i);o.a},"2db2":function(t,e,n){"use strict";var i=n("17b6"),o=n.n(i);o.a},"2e7a":function(t,e,n){"use strict";var i=n("a0c5"),o=n.n(i);o.a},3:function(t,e){},"39af":function(t,e,n){},"3c83":function(t,e,n){},4:function(t,e){},"41f0":function(t,e,n){"use strict";var i=n("5e88"),o=n.n(i);o.a},4718:function(t,e,n){"use strict";var i=n("9298"),o=n.n(i);o.a},"4a01":function(t,e,n){n("4160"),n("c975"),n("a15b"),n("fb6a"),n("45fc"),n("a434"),n("b64b"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("159b");var i=n("7037"),o=9007199254740991;window.HAS_TOUCH="ontouchstart"in document.body,window.PROP_TRANSITION="transition"in document.body.style?"transition":"webkitTransition",window.PROP_TRANSFORM="transform"in document.body.style?"transform":"webkitTransform",window.request=function(t,e,n,i,o){try{var a=new XMLHttpRequest;for(var s in a.open(o||(n?"POST":"GET"),t),i)a.setRequestHeader(s,i[s]);return a.onreadystatechange=function(){4===a.readyState&&e&&e(a)},a.send(n),a}catch(r){return null}},Object.defineProperties(String,{attr:{value:function(t,e){var n,i=/\$\{((\{[\s\S]*?\})*[\s\S]*?)*?\}/g,o=0,a=[];while(n=i.exec(t))a.push(t.slice(o,n.index).replace(/('|")/g,"\\$1")),a.push(n[0]),o=n.index+n[0].length;return a.push(t.slice(o).replace(/('|")/,"\\$1")),new Function("fodder","with(fodder){return '"+a.join("").replace(i,(function(t){return"'+("+t.slice(2,-1)+")+'"}))+"';}")(e||{})}}}),Object.defineProperties(Node.prototype,{getParentNode:{value:function(t,e,n){if("function"!==typeof e)if(n=e,"string"===typeof t)switch(t[0]){case".":t=t.slice(1),e=function(t,e){return t.hasClass(e)};break;case"#":t=t.slice(1),e=function(t,e){return t.id===e};break;case"]"===t[t.length-1]&&"[":t=t.slice(1,-1),e=function(t,e){return t.hasAttribute(e)};break;default:t=t.toUpperCase(),e=function(t,e){return t.tagName===e};break}else if(t instanceof HTMLElement)e=function(t,e){return t===e};else{if("function"!==typeof t)return!1;n=e,e=t}isNaN(n)&&(n=3);var i=0,o=this;while(i++<n&&o){if(e(o,t))return this.getParentNode._deep=i,o;o=o.parentNode}}},replaceNodeEx:{value:function(t){return t=Array.prototype.slice.call(t instanceof Node?arguments:t||[]),t.length?(this.parentNode.replaceChild(t[0],this),t.length>1&&this.insertAfterEx.apply(t[0],t.slice(1))):this.flee(),t}},insertAfterEx:{value:function(t){var e=this,n=this.parentNode;return t=Array.prototype.slice.call(t instanceof Node?arguments:t),t.forEach((function(t){e.nextSibling?n.insertBefore(t,e.nextSibling):n.appendChild(t),e=t})),t}},insertBeforeEx:{value:function(t){return t=Array.prototype.slice.call(t instanceof Node?arguments:t),t.length&&(this.parentNode.insertBefore(t[0],this),t.length>1&&t[0].insertAfterEx(t.slice(1))),t}},flee:{value:function(){return this.parentNode&&this.parentNode.removeChild(this),this}}}),Object.defineProperties(HTMLElement.prototype,{getQuerySelector:{value:function(){var t;switch(!0){case this.id&&!0:return"#"+this.id;default:return t=this.parentNode&&"BODY"!==this.parentNode.tagName&&this.parentNode.getQuerySelector()||"",t+(t&&">")+(this.className?"."+this.className.replace(/^ *| .*$/g,""):this.tagName)}}},insertChildEx:{value:function(t,e){return isNaN(e)&&(e=0),this.children[e]?this.children[e].insertBeforeEx(t):this.appendChild(t),t}},hasClass:{value:function(t){return void 0!==t&&new RegExp("(^| )"+t+"($| )").test(this.className)}},replaceClass:{value:function(t,e){return this.className=this.className.replace(new RegExp("(^| )"+t+"(?=$| )"),e?" "+e:""),this.className}},addClass:{value:function(t){return this.hasClass(t)||(this.className=this.className+" "+t)}},toggleClass:{value:function(t,e){var n=this.hasClass(t);return void 0===e&&(e=!n),"string"!==typeof e?e^n&&(n?this.replaceClass(t):this.addClass(t)):n?this.replaceClass(t,e):this.addClass(e),n}},_scrolling:{value:window._scrolling=function(t){for(var e=-this._bst+(this._bst=this.scrollTop),n=0,i=this._sl_list[n];n<this._sl_list.length;n++,i=this._sl_list[n])Math.abs(i.diff+=e)>=i.grain&&(i.listener(t,i.diff),i.diff=i.diff%i.grain)},writable:!0},offScroll:{value:window.offScroll=function(t,e){return this._sl_list&&this._sl_list.some((function(n,i){if(n.listener===t)return e=i,!0})),!isNaN(e)&&this._sl_list.splice(e,1)}},onScroll:{value:function(t,e,n,i){this.clearScroll(t);var a=this===document.body?window:this;a.onscroll&&a.onscroll===a._scrolling||(a._scrolling=a._scrolling.bind(this),i=a.onscroll,a.onscroll=a._scrolling,this._sl_list=new Array,this._bst=0,i&&this.onScroll(i)),e||(e=1),isNaN(n)&&(n=o/2-o/2%e),this._sl_list.push({listener:t,grain:e,diff:n})}}}),window.onScroll=document.body.onScroll.bind(document.body),Object.defineProperties(Object,{sort:{value:function(t,e){"function"===typeof e||(e=new Function("a","b","return a"+(!0===e?"<":">")+"b;"));for(var n,i=Object.keys(t),o=0;o<i.length;o++){for(var a=o+1;a<i.length;a++)if(e(t[i[o]],t[i[a]])){var s=i[o];i[o]=i[a],i[a]=s}n=t[i[o]],delete t[i[o]],t[i[o]]=n}return t}},size:{value:function(t,e){if(isNaN(e))return Object.keys(t).length;var n=Object.keys(t);if(e>=0)for(var i=n.length-1;i>=e;i--)delete t[n[i]];else for(var o=0,a=n.length+e;o<a;o++)delete t[n[o]];return Object.size(t)}},splice:{value:function(t,e,n){var i=Object.keys(t);for(e<0&&(e+=-e<i.length?i.length:-e);e<i.length&&n>0;e++,n--)delete t[i[e]];return t}},indexOf:{value:function(t,e){var n=Object.keys(t);return"number"===typeof e?n[e]:n.indexOf(e)}},valueAt:{value:function(t,e){return t["number"===typeof e?Object.indexOf(t,e):e]}},clone:{value:function(t,e,n){if(isNaN(e)&&(e=100),"object"===i(t)&&null!==t&&e--){var o=(n||(n=[[],[]]))[0].indexOf(t);if(-1!==o)return n[1][o];var a=t instanceof Array?[]:{};for(var s in n[0].push(t),n[1].push(a),t)a[s]=Object.clone(t[s],e,n);return a}return t}}})},5595:function(t,e,n){},"5bba":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{class:t.inited||"initing",attrs:{id:"wrapper"}},[n("keep-alive",[n("router-view")],1),n("keep-alive",[n("router-view",{attrs:{name:"side"}})],1),n("transition",{attrs:{name:"bottom-slide"}},[n("keep-alive",[n("router-view",{attrs:{name:"footer"}})],1)],1),n("router-view",{attrs:{name:"modal_layer"}})],1)},a=[],s=(n("b0c0"),n("0253")),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{attrs:{id:"main_panel"}},[n("navigation-view",{attrs:{is_edit_mode:t.is_edit_mode}}),t._l(t.tabs,(function(e){return[n("webpage-view",t._b({key:e._id},"webpage-view",{data:e,STATES:t.tabbar.STATES,capture_mouse:t.capture_mouse,show:!t.is_edit_mode},!1))]}))],2)},c=[],l=(n("c975"),n("5530")),u=n("2f62"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"navigation-container",class:{editor:t.is_edit_mode},style:{visibility:t.visible?"":"hidden"}},[n("resize-width",{attrs:{is_edit_mode:t.is_edit_mode,value:t.data.width},on:{resize:t.resize}}),n("ul",{ref:"navigation_content",staticClass:"navigation-content",style:{width:t.width+"px"},on:{click:t.click}},[t._l(t.content,(function(e){return[n("navigation-item",t._b({key:e._id,ref:"children",refInFor:!0,attrs:{data:e,is_edit_mode:t.is_edit_mode},on:{resize:function(n){var i=arguments.length,o=Array(i);while(i--)o[i]=arguments[i];return t.resize_item.apply(void 0,[e].concat(o))},update:function(t){e[arguments[0]]=arguments[1]},pop:t.receive,edit:function(n){var i=arguments.length,o=Array(i);while(i--)o[i]=arguments[i];return t.show_editor.apply(void 0,o.concat([e]))}}},"navigation-item",e,!1))]}))],2),t.editor_data?n("navitem-editor",t._b({on:{change:t.change,delete:t.del,close:t.close_editor}},"navitem-editor",t.editor_data,!1)):t._e()],1)},d=[],p=(n("a434"),n("b85c")),f=n("1d12"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ins",{staticClass:"resize-view",style:{width:t.width+"px"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.is_edit_mode,expression:"is_edit_mode"}],ref:"border",staticClass:"border"},[n("sup",{ref:"left_limit",staticClass:"left-limit"}),n("sub",{ref:"right_limit",staticClass:"right-limit"})])])},v=[],m=(n("a9e3"),n("f556")),g=i["a"].extend({mounted:function(){this.inputListener=new m["a"](this.$refs.border,{dragStart:this.dragStart,dragMove:this.dragMove,dragEnd:this.dragEnd})},methods:{dragStart:function(t,e){this.direction=e.target===this.$refs.left_limit?-2:2},dragMove:function(t,e,n){this.width=Math.max(this.width+e[0]*this.direction,420)},dragEnd:function(t,e){}},computed:{width:{get:function(){return this.value},set:function(t){this.$emit("resize",t,this.direction<0?-1:1)}}},props:{is_edit_mode:Boolean,value:{type:Number,default:1e3}},data:function(){return{direction:2,InputListener:null}}}),w=g,b=(n("9b97"),n("2877")),y=Object(b["a"])(w,_,v,!1,null,"25956528",null),k=y.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"nav-editor"},[n("b",{ref:"mask_layer",staticClass:"black-mask-layer",style:{zIndex:t.zIndex},on:{click:function(e){e.target===t.$refs.mask_layer&&t.save()}}}),n("div",{staticClass:"container"},[n("var",{staticClass:"content"},[t.parent?t._e():n("p",{staticClass:"styles-selector"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],attrs:{id:"style_strip",type:"radio",name:"type",value:"strip"},domProps:{checked:t._q(t.type,"strip")},on:{change:function(e){t.type="strip"}}}),n("label",{attrs:{for:"style_strip","data-text":"长条"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],attrs:{id:"style_block",type:"radio",name:"type",value:"block"},domProps:{checked:t._q(t.type,"block")},on:{change:function(e){t.type="block"}}}),n("label",{attrs:{for:"style_block","data-text":"方块"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],attrs:{id:"style_cite",type:"radio",name:"type",value:"cite"},domProps:{checked:t._q(t.type,"cite")},on:{change:function(e){t.type="cite"}}}),n("label",{attrs:{for:"style_cite","data-text":"缩放"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],attrs:{id:"style_box",type:"radio",name:"type",value:"box"},domProps:{checked:t._q(t.type,"box")},on:{change:function(e){t.type="box"}}}),n("label",{attrs:{for:"style_box","data-text":"文件夹"}})]),n("br"),n("p",{staticClass:"content-editor"},[n("label",{staticClass:"tag-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.data.title,expression:"data.title"}],attrs:{placeholder:"box"!==t.data.type?"书签名":"文件夹名",spellcheck:"false"},domProps:{value:t.data.title},on:{input:function(e){e.target.composing||t.$set(t.data,"title",e.target.value)}}}),n("i",{staticClass:"icon-tag"})]),"box"!==t.data.type?n("label",{staticClass:"link-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{maxlength:"256",placeholder:"链接",spellcheck:"false"},domProps:{value:t.content},on:{change:t.save_content,input:function(e){e.target.composing||(t.content=e.target.value)}}}),n("i",{staticClass:"icon-chain"})]):[n("button",{staticClass:"btn icon-narrow",staticStyle:{"font-weight":"bold"},attrs:{title:"缩小"},on:{click:function(e){return t.zoom(-1)}}}),n("button",{staticClass:"btn icon-stretch",staticStyle:{"font-weight":"bold"},attrs:{title:"放大"},on:{click:function(e){return t.zoom(1)}}})],n("button",{staticClass:"btn btn-delete icon-close",attrs:{title:"删除"},on:{click:t.del}}),n("button",{staticClass:"btn btn-check icon-check",attrs:{title:"保存"},on:{click:t.save}})],2)])])])},O=[],E=(n("ac1f"),n("5319"),i["a"].extend({mounted:function(){},props:{data:Object,zIndex:Number,parent:Object},methods:{zoom:function(t){this.$emit("change","colspan",t)},del:function(){this.$emit("delete"),"EditNavgation"===this.$route.name&&this.$router._exit("Editor")},save:function(){this.$emit("close"),"EditNavgation"===this.$route.name&&this.$router._exit("Editor")},save_content:function(){this.data.content=this.content.replace(/(?!^\S+?:\/\/)^/,"http://")}},watch:{"data.content":function(t,e){t!==this.content&&(this.content=t),"box"!==this.data.type&&(this.data.icon=t&&this.extractIcon(t))}},computed:Object(l["a"])({},Object(u["b"])(["extractIcon"]),{type:{get:function(){return this.data.type},set:function(t){this.$emit("change","type",t)}}}),data:function(){return{content:this.data.content}}})),S=E,T=(n("4718"),Object(b["a"])(S,x,O,!1,null,"6021aa62",null)),C=T.exports,$=i["a"].extend({created:function(){},mixins:[],components:{NavigationItem:f["default"],NavitemEditor:C,ResizeWidth:k},mounted:function(){var t=this;this.$refs.navigation_content._receive=this.receive,this.mutexBox=new m["b"](this.$refs.navigation_content,this.content,{capture:function(e,n,i){var o=n.target.getParentNode(f["default"],(function(t,e){return t.__vue__ instanceof e}));if(o&&-1!==t.$refs.children.indexOf(o.__vue__))return!0},client_width:this.width,space:this.space,ncols:this.ncols,onPick:this.on_pick,onMove:this.on_move,onStay:this.on_stay,onDrop:this.on_drop}),this.is_edit_mode||this.mutexBox.disable(),this.update_scroll(),this.routeUpdate()},computed:Object(l["a"])({visible:function(){return this.is_edit_mode||this.active_record&&this.active_record.state&this.$store.state.tabbar.STATES.HOME},width:function(){return 60*Math.floor(this.data.width/60)},ncols:{get:function(){return this.data.ncols},set:function(t){var e=this;this.$nextTick((function(){t!==e.data.ncols&&(e.data.ncols=t,e.mutexBox.resize(t,e.resize_direction))}))}},content:function(){return this.data.content}},Object(u["c"])({data:"navigation"}),{},Object(u["b"])(["getUniqueID","getTopIndex","active_record"])),watch:{width:function(t,e){this.mutexBox.options.client_width=t,this.ncols=Math.ceil(t/60)},data:function(t,e){t!==e&&(e&&this.mutexBox.remove(e.content),this.mutexBox.ncols=t.ncols,this.mutexBox.add(t.content))},"$route.name":function(t,e){this.routeUpdate(t,e)},is_edit_mode:function(t,e){this.update_scroll(),t?this.mutexBox.activate():this.mutexBox.disable()}},props:{is_edit_mode:Boolean},methods:{resize:function(t,e){this.resize_direction=e,this.data.width=t},click:function(t){},routeUpdate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route.name;arguments.length>1&&arguments[1];if(this.editor_data&&this.close_editor(),"EditNavgation"===t){var e={content:"",title:"",icon:"",colspan:4,rowspan:1,type:"strip",left:0,top:0,width:0,height:0,dragging:!1,zIndex:this.getTopIndex(),_id:this.getUniqueID()};this.mutexBox.add(e),this.content.push(e),this.show_editor(e);var n=this.getScrollTop();(e.top<n||e.top>n+window.innerHeight-200)&&this.setScrollTop(e.top)}},change:function(t,e){var n=this.editor_data.data;if("type"===t){var i={strip:[4,1],block:[4,4],cite:[8,8],box:[8,3]}[e];if(i){if(this.mutexBox.remove(n),"box"===n.type?this.editor_data._bak_box={content:n.content,colspan:n.colspan,rowspan:n.rowspan}:this.editor_data._bak_url=n.content,n.type=e,"box"===e){var o=this.editor_data._bak_box||{content:[],colspan:i[0],rowspan:i[1]};n.content=o.content,n.colspan=o.colspan,n.rowspan=o.rowspan}else n.content=this.editor_data._bak_url||"",n.colspan=i[0],n.rowspan=i[1];this.mutexBox.format(n),this.mutexBox.add(n)}}else if("colspan"===t){var a=Math.min(Math.max(n.colspan+e,1),this.ncols);a!==n.colspan&&this.mutexBox.update(n,Object(l["a"])({colspan:a},a+n.col>this.ncols&&{col:this.ncols-a}))}else n[t]=e},close_editor:function(){if(this.editor_data){var t=this.editor_data.data;t.editing=!1,t.content||t.title?this.editor_data=null:this.del()}},del:function(){if(!this.editor_data.parent||!this.editor_data.parent._vue.del(this.editor_data.data)){var t=this.content.indexOf(this.editor_data.data);-1!==t&&(this.mutexBox.remove(this.editor_data.data),this.content.splice(t,1))}this.editor_data=null},show_editor:function(t,e){var n=this;if(this.editor_data){var i=this.editor_data.data;if(i.editing=!1,i===t)return void(this.editor_data=null)}"EditNavgation"===this.$route.name||this.$router._to("Editor"),this.$nextTick((function(){t.editing=!0,n.editor_data={data:t,zIndex:n.getTopIndex()-2,parent:e}}))},setScrollTop:function(t){var e=this;this.$nextTick((function(){e.is_edit_mode?window.scrollTo?window.scrollTo(0,t):(document.scrollingElement||document.documentElement).scrollTop=t:e.$el.scrollTop=t}))},getScrollTop:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.is_edit_mode;return t?(document.scrollingElement||document.documentElement).scrollTop:this.$el.scrollTop},update_scroll:function(){this.setScrollTop(this.getScrollTop(!this.is_edit_mode)),document.documentElement.style.overflowY=this.is_edit_mode?"scroll":""},receive:function(t,e,n,i){if("string"===typeof i.content){var o,a=this.$refs.navigation_content.getBoundingClientRect(),s=this.mutexBox.cellSize,r=this.space,c=r.left,l=r.right,u=r.top,h=r.bottom,d=4*s-c-l,p=1*s-u-h,f={content:i.content,title:i.title,icon:i.icon,colspan:4,rowspan:1,type:"strip",left:n.left-a.left-(d-n.width)*(e.clientX-n.left)/n.width,top:n.top-a.top-(p-n.height)*(e.clientY-n.top)/n.height,width:d,height:p,dragging:!0,editing:!1,zIndex:this.getTopIndex(),_id:this.getUniqueID()};return this.content.push(f),this.mutexBox.receive(t,e,f),i===(null===(o=this.editor_data)||void 0===o?void 0:o.data)&&(this.editor_data.data=f,f.editing=!0,this.editor_data.parent=null),f}},resize_item:function(t,e){var n=e.top,i=void 0===n?0:n,o=e.right,a=void 0===o?0:o,s=e.bottom,r=void 0===s?0:s,c=e.left,l=void 0===c?0:c;if(i+a+r+l){var u={},h=this.mutexBox.cellSize;r&&(u.rowspan=t.rowspan+Math.ceil(r/h)),this.mutexBox.update(t,u)}},bind_mutex_box:function(){for(var t in this.content){var e=this.content[t];"box"!==e.type||e._mutex_box||(e._mutex_box=new this.MutexBox(this.$refs.nav_item[t],e.content,{ncols:8,space:{left:5,right:5,top:5,bottom:5},client_width:e.width}))}},on_pick:function(t,e,n){if(n.zIndex=this.getTopIndex(),"BUTTON"===e.target.tagName)return!0},capture_test:function(t,e){var n=t.left,i=t.top,o=t.width,a=t.height;if(e.left-n<o/2&&n-e.left-e.width<-o/2&&e.top-i<a/2&&i-e.top-e.height<-a/2)return!0},on_drop:function(t,e,n,i){},on_stay:function(t,e,n,i){if("box"!==n.type){var o,a=Object(p["a"])(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;if("box"===s.type&&this.capture_test(n,s)){var r;this.content.splice(this.content.indexOf(n),1);var c=s._vue.receive(t,e,n._vue.$el.getBoundingClientRect(),n);return n===(null===(r=this.editor_data)||void 0===r?void 0:r.data)&&(this.editor_data.data=c,c.editing=!0,this.editor_data.parent=s),!0}}}catch(l){a.e(l)}finally{a.f()}}},on_move:function(t,e,n){if("box"!==n.type){var i=e.target.getParentNode((function(t){return"function"===typeof t._receive}),5);if(i&&!i.getParentNode(this.$el,5)&&i._receive(t,e,n._vue.$el.getBoundingClientRect(),n)){var o=this.content.indexOf(n);return-1!==o&&this.content.splice(o,1),!0}}}},data:function(){return{resize_direction:0,editor_data:null,inputListenr:null,space:{left:8,right:8,top:8,bottom:8},mutexBox:null}}}),N=$,M=(n("e3dc"),Object(b["a"])(N,h,d,!1,null,null,null)),A=M.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"webpage-view",style:{visibility:t.visible?"":"hidden"}},[n("iframe",{ref:"webview",style:{pointerEvents:t.capture_mouse?"":"none"},attrs:{sandbox:"allow-forms allow-scripts allow-same-origin allow-popups",src:t.content.url},on:{load:t.loaded,error:t.loaded}})])},j=[],P=i["a"].extend({mounted:function(){this.reload()},methods:{loaded:function(){this.content.state&=~this.STATES.LOADING},reload:function(){this.content.url&&(this.content.state|=this.STATES.LOADING)}},watch:{"content.state":function(t,e){t&this.STATES.ABORT&&(this.STATES.ABORT&=~this.STATES.ABORT,this.loaded(),this.$refs.webview.src="")},content:function(t,e){e.url&&t.url===e.url&&(this.$refs.webview.src="",this.$refs.webview.src=t.url),e&&(e.state&=~this.STATES.LOADING),this.reload()}},computed:{visible:function(){return this.show&&!(this.content.state&this.STATES.HOME)&&this.data.state&this.STATES.ACTIVE},content:function(){return this.data.history[this.data.index]}},props:{data:Object,STATES:Object,capture_mouse:Boolean,show:Boolean}}),L=P,U=(n("6581"),Object(b["a"])(L,I,j,!1,null,"5108801c",null)),R=U.exports,D=i["a"].extend({mounted:function(){},components:{NavigationView:A,WebpageView:R},methods:{},computed:Object(l["a"])({is_edit_mode:function(){return-1!==this.$route.path.indexOf("editor")},capture_mouse:function(){return!this.tabbar.capture_mouse}},Object(u["b"])({tabs:"tabbar_content_set"}),{},Object(u["c"])({tabbar:"tabbar"})),data:function(){return{}}}),B=D,H=(n("f50b"),Object(b["a"])(B,r,c,!1,null,"b4d03052",null)),z=H.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{staticClass:"bookmark-panel",class:t.is_edit_mode&&"editor",attrs:{id:"bookmark_panel"},on:{touchstart:t.close,mousedown:t.close}},[n("bookmark-list",t._b({ref:"bookmark_list"},"bookmark-list",t.bookmark_data,!1))],1)},q=[],Y=n("a454"),V=i["a"].extend({mounted:function(){},watch:{"$route.name":function(t,e){this.using="Bookmark"===t||"EditBookmark"===t}},computed:Object(l["a"])({is_edit_mode:function(){return"EditBookmark"===this.$route.name}},Object(u["c"])({data:"bookmark"}),{bookmark_data:function(){return{data:{using:this.using,content:this.data.content},content:this.data,bottom:0}}}),data:function(){return{editing:!1,using:!0}},components:{BookmarkList:Y["default"]},methods:{close:function(t){t.target===this.$el&&"Bookmark"===this.$route.name&&this.$router._exit()}}}),X=V,W=(n("256a"),Object(b["a"])(X,F,q,!1,null,"0281d9fd",null)),G=W.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"task-bar"},[n("navigation-bar",t._b({},"navigation-bar",{data:t.data},!1)),n("tab-bar",t._b({},"tab-bar",{data:t.data},!1)),n("state-bar")],1)},J=[],Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{staticClass:"navigation-bar"},[n("sup",[n("button",{staticClass:"btn btn-back icon-arrow-left",class:t.has_back&&"active",on:{click:t.back}})]),n("sub",[n("button",{staticClass:"btn btn-forward icon-arrow-right",class:t.has_forward&&"active",on:{click:t.forward}})]),n("label",{staticClass:"address-bar"},[n("tips-view",{ref:"tips_view",on:{search:t.search,browse:t.go}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.input_value,expression:"input_value"}],ref:"input_field",staticClass:"input-field",attrs:{id:"in_url",autocomplete:"off",spellcheck:"false"},domProps:{value:t.input_value},on:{blur:t.blur,focus:t.focus,keyup:t.keyup,input:function(e){e.target.composing||(t.input_value=e.target.value)}}}),n("button",{staticClass:"btn btn-break",class:t.content.state&t.STATES.LOADING?"icon-close":"reload"===t.input_type?"icon-rotate-right":"icon-arrow-right",on:{click:function(e){return t.load()}}}),n("button",{staticClass:"btn btn-search icon-search",on:{click:function(e){return t.search()}}}),n("label",{staticClass:"btn btn-tips icon-chevron-down",class:t.$refs.tips_view&&t.$refs.tips_view.is_show&&"active",attrs:{for:"in_url"},on:{click:t.toggleTips}})],1)])},Z=[],tt=(n("841c"),n("498a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{directives:[{name:"show",rawName:"v-show",value:t.is_show,expression:"is_show"}],staticClass:"tips-view"},[t._l(t.content,(function(e,i){return[n("li",{key:i},[n("span",{staticClass:"text",class:t.icon_class_map[e.type],domProps:{innerHTML:t._s(e.html)},on:{click:function(n){return t.load(e)}}}),"network"===e.type?n("i",{staticClass:"icon-cloud right"}):n("i",{staticClass:"icon-close right",on:{click:function(n){return t.remove(e)}}})])]}))],2)}),et=[],nt=(n("99af"),n("fb6a"),n("4d63"),n("25f0"),i["a"].extend({mounted:function(){window._async_receiver=this.appendContent},computed:Object(l["a"])({},Object(u["c"])(["search_history","browse_history"]),{is_show:function(){return this.content.length>0},regExp:function(){return!0===this.key||this.key&&new RegExp(this.key.replace(/\W/g,"\\$&"),"g")},use_async_suggestion:function(){return!this.$store.state.setting.no_suggestion}}),watch:{regExp:function(t,e){this.content=t?[].concat(this.matchRecords(t,this.search_history,"search"),this.matchRecords(t,this.browse_history,"browse")):[]}},methods:{appendContent:function(t){if(t.q===this.key)for(var e=0,n=t.s,i=Math.min(n.length,6);e<i;e++){var o=n[e];this.content.unshift({html:o.replace(/</g,"&lt;"),type:"network",key:" "+o})}},matchRecords:function(t,e,n){var i=0,o=4,a=[];for(var s in e){var r=s.slice(1).replace(/</g,"&lt;"),c=!0===t?r:r.replace(t,"<em>$&</em>");if((!0===t||c.length>r.length)&&(a.push({html:c,key:s,record:r,type:n}),++i>=o))break}return a},load:function(t){switch(t.type){case"search":case"network":this.$emit("search",t.key.slice(1));break;case"browse":this.$emit("browse",t.key.slice(1));break}this.close()},remove:function(t){"search"===t.type?delete this.search_history[t.key]:"browse"===t.type&&delete this.browse_history[t.key],this.content.splice(this.content.indexOf(t),1)},show:function(t){this.key=t,this.use_async_suggestion&&this.getAsyncSuggestion(t)},getAsyncSuggestion:function(t){var e=this;if(this._async_script&&(this._async_script.src="",this._async_script.flee(),this._async_script=null),t&&!0!==t){var n=document.createElement("script");n.src="http://suggestion.baidu.com/su?cb=_async_receiver&wd="+encodeURIComponent(t),n.onload=function(){e._async_script===n&&(e._async_script.flee(),e._async_script=null)},document.body.appendChild(this._async_script=n)}},close:function(){this.key=null,this.getAsyncSuggestion(!1)}},data:function(){return{content:[],key:null,icon_class_map:{search:"icon-search",browse:"icon-arrow-right",network:"icon-search"}}}})),it=nt,ot=(n("e0cb"),n("2db2"),Object(b["a"])(it,tt,et,!1,null,"116852d0",null)),at=ot.exports,st=i["a"].extend({mounted:function(){},components:{TipsView:at},watch:{content:function(t,e){(t.url||e&&e.url===this.input_value)&&(this.input_value=t.url)}},computed:{has_back:function(){var t=this.data.active;return t&&t.index>0},has_forward:function(){var t=this.data.active;return t&&t.index<t.history.length-1},input_type:function(){return(this.input_value||"")===(this.content.url||"")?"reload":"break"},content:function(){var t;return(null===(t=this.data.active)||void 0===t?void 0:t.history[this.data.active.index])||{}},history:function(){return this.data.active.history},length:function(){return this.history.length},STATES:function(){return this.data.STATES},index:{get:function(){return this.data.active.index},set:function(t,e){this.data.active.index=t}}},props:{data:{type:Object}},methods:{toggleTips:function(){var t=this.$refs.tips_view;t.is_show?t.close():t.show(this.input_value||!0)},blur:function(){var t=this;this._tips_view_timeout=window.setTimeout((function(){t._tips_view_timeout=null,t.$refs.tips_view.close()}),120)},focus:function(){this._tips_view_timeout?window.clearTimeout(this._tips_view_timeout):this.$refs.input_field.select()},keyup:function(t){if("Enter"===t.key)this.load(),this.$refs.tips_view.close();else{var e=this.$refs.input_field.value;e!==this._bak_value&&(this._bak_value=e,this.$refs.tips_view.show(e))}},back:function(){this.has_back&&this.index--},forward:function(){this.has_forward&&this.index++},getSearchUrl:function(t){return this.$store.state.default.search_url.replace(/\$\{\S*?\$\S*?\}/g,encodeURIComponent(t))},search:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.input_value;t&&(this.$store.commit("add_search_record",t),this.$store.commit("new_tab",{url:this.getSearchUrl(t),title:t}))},go:function(t){this.$store.commit("add_browse_record",t),this.$store.commit("go",t)},load:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.input_value;if(this.content.state&this.STATES.LOADING)this.content.state|=this.STATES.ABORT;else if("break"===this.input_type)e&&(/^(?=[^.]+\.[^.]+)[\x21-\x7e]+$/.test(e)?this.go(e.trim().replace(/(?!^\S+?:\/\/)^/,"http://")):this.search(e));else if(this.content.url){var n=this.content.url;this.content.url="",this.content.state|=this.STATES.LOADING,this.$nextTick((function(){t.content.url=n}))}}},data:function(){return{tips_data:[],input_value:""}}}),rt=st,ct=(n("f738"),Object(b["a"])(rt,Q,Z,!1,null,"1be7132e",null)),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ins",{staticClass:"state-bar"},[n("button",{staticClass:"btn-bookmark icon-star",on:{click:function(e){return t.$router._toggle("Bookmark")}}}),n("button",{staticClass:"btn-setting icon-cog",on:{click:t.to_editor}}),n("button",{staticClass:"btn-home",class:t.btn_home_class,attrs:{title:t.btn_home_title},on:{click:t.to_home}})])},ht=[],dt=i["a"].extend({mounted:function(){},computed:Object(l["a"])({btn_home_title:function(){return 1===this.userinfo.status?"用户 : ".concat(this.userinfo.account,"\n 链接数 : ").concat(this.userinfo.connectCount):""}},Object(u["c"])(["userinfo"]),{},Object(u["b"])(["active_record"]),{btn_home_class:function(){return-1===this.userinfo.status?"icon-user-times":1===this.userinfo.status?"icon-user":"icon-spinner"}}),methods:{to_editor:function(){this.$router._to("Bookmark"===this.$route.name?"EditBookmark":"Editor")},to_home:function(){var t,e=this;-1===this.userinfo.status?this.$store.state.client.connect((function(t){"open"!==t&&e.$router._to("User")}))||this.$router._to("User"):(this.$router._to("Main"),(null===(t=this.active_record)||void 0===t?void 0:t.state)!==this.$store.state.tabbar.STATES.HOME&&this.$store.commit("go"))}}}),pt=dt,ft=(n("c6df"),Object(b["a"])(pt,ut,ht,!1,null,"05572235",null)),_t=ft.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{ref:"tab_bar",staticClass:"tab-bar",style:{fontSize:t.size_rate.toFixed(3)+"rem"}},[t._l(t.content_set,(function(e){return[n("tab-item",t._b({key:e._id,ref:"tab_item",refInFor:!0},"tab-item",{zIndex:1e3-t.content.indexOf(e),STATES:t.STATES,data:e},!1))]})),n("li",{ref:"tab_add",staticClass:"tab-add",style:{transform:"translateX("+t.btn_add_tx+"px)"}},[n("button",{staticClass:"btn-add icon-plus",on:{click:t.newTab}})])],2)},mt=[],gt=(n("13d5"),n("b680"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"tab-item",class:t.data.state&t.STATES.ACTIVE&&"active",style:{zIndex:t.zIndex,transform:"translateX("+t.data.translateX+"px)"},attrs:{title:t.title}},[n("i",{staticClass:"icon-spinner",class:t.state&t.STATES.LOADING&&"loading"},[n("img",{directives:[{name:"catch-icon",rawName:"v-catch-icon"}],staticClass:"icon",attrs:{src:t.icon}})]),n("span",{staticClass:"title",attrs:{"data-text":t.title}}),n("button",{staticClass:"btn btn-close icon-close"})])}),wt=[],bt=i["a"].extend({mounted:function(){this.data._vue=this},directives:{},computed:{content:function(){return this.data.history[this.data.index]},state:function(){return this.content.state},icon:function(){return this.content.icon||this.$store.state.default.favicon},title:function(){return this.state&this.STATES.HOME?this.$store.state.default.tab_name:this.content.title}},props:{data:Object,STATES:Object,zIndex:Number},data:function(){return{}}}),yt=bt,kt=(n("187a"),Object(b["a"])(yt,gt,wt,!1,null,"52d10865",null)),xt=kt.exports,Ot=i["a"].extend({mounted:function(){this.init()},watch:{"content.length":function(t,e){this.$nextTick(this.update)},"active_tab.index":function(t,e){this.$nextTick(this.update)},active_tab:function(t,e){this.target_index=this.content.indexOf(t)}},computed:Object(l["a"])({},Object(u["b"])({getUniqueID:"getUniqueID",content_set:"tabbar_content_set"}),{active_tab:{get:function(){return this.data.active},set:function(t){this.$store.commit("activite_tab",t)}},content:function(){return this.data.content},STATES:function(){return this.data.STATES}}),props:{data:Object},directives:{},methods:{init:function(){window.addEventListener("resize",this.update),this.inputListener=new m["a"](this.$refs.tab_bar,{dragStart:this.dragStart,dragMove:this.dragMove,dragEnd:this.dragEnd,click:this.click},{mouse_mask:3,pointX:"clientX",pointY:"clientY"});var t,e=Object(p["a"])(this.content);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.state&this.STATES.ACTIVE)return void(this.active_tab=n)}}catch(i){e.e(i)}finally{e.f()}this.content[0]&&(this.active_tab=this.content[0])},newTab:function(){this.$store.commit("new_tab")},dragStart:function(t,e){var n=e.target.getParentNode(xt,(function(t,e){return t.__vue__ instanceof e}));return!n||(t.preventDefault(),2&Math.pow(2,t.button)||e.target.getParentNode(".btn-close")?["click"]:(this.active_tab=n.__vue__.data,n.style[window.PROP_TRANSITION]="none",this.data.capture_mouse=!0,["dragMove","dragEnd"]))},dragMove:function(t,e,n){if(0!==e[0]){var i=this.active_tab;i.translateX=Math.max(i.translateX+e[0],0);var o=this.target_index+(e[0]>0?1:-1),a=this.content[o];if(a){var s=i.translateX,r=a.translateX,c=a._vue.$el.offsetWidth,l=i._vue.$el.offsetWidth;e[0]>0?(s+=l,r+=(c+this.tab_range)/2-this.tab_range,s>r&&(this.content.splice(this.target_index,2,a,i),this.target_index=o,a.translateX+=-l-this.tab_range)):(r+=(c+this.tab_range)/2,s<r&&(this.content.splice(this.target_index=o,2,i,a),a.translateX-=-l-this.tab_range))}}},dragEnd:function(t,e){if(this.data.capture_mouse=!1,this.active_tab._vue.$el.style[window.PROP_TRANSITION]="",0===this.target_index)this.active_tab.translateX=0;else{var n=this.content[this.target_index-1];this.active_tab.translateX=n.translateX+n._vue.$el.offsetWidth+this.tab_range}},click:function(t,e){var n=this,i=e.target.getParentNode(xt,(function(t,e){return t.__vue__ instanceof e}));if(i){var o=i.__vue__.data,a=this.content.indexOf(o);a>=0&&(this.content.splice(a,1),0===this.content.length&&this.content.push({history:[{state:4}],index:0,state:0,_id:this.getUniqueID()}),this.active_tab=this.content[Math.min(this.target_index,this.content.length-1)],this.$nextTick((function(){n.update()})))}},get_tabitems_width:function(){return this.content.reduce((function(t,e){return t+e._vue.$el.offsetWidth}),0)+this.$refs.tab_add.offsetWidth},get_tab_range:function(){var t=this.$refs.tab_bar.clientWidth,e=this.$refs.tab_bar;e.style.fontSize="1.2rem";var n=this.get_tabitems_width();t<.9*n&&(this.size_rate=t/n,e.style.fontSize="".concat(this.size_rate.toFixed(3),"rem"),n=this.get_tabitems_width());var i=this.content.length;return this.tab_range=Math.min((t-n)/Math.max(i-1,1),0),this.tab_range},update:function(){var t,e=0,n=this.get_tab_range(),i=Object(p["a"])(this.content);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.translateX=e,e+=n+o._vue.$el.offsetWidth}}catch(a){i.e(a)}finally{i.f()}this.btn_add_tx=e-n-2}},components:{TabItem:xt},data:function(){return{tab_range:0,target_index:null,inputListener:null,btn_add_tx:0,size_rate:1}}}),Et=Ot,St=(n("2bbe"),Object(b["a"])(Et,vt,mt,!1,null,"71b7b3eb",null)),Tt=St.exports,Ct=i["a"].extend({mounted:function(){},components:{TabBar:Tt,NavigationBar:lt,StateBar:_t},computed:Object(l["a"])({},Object(u["c"])({data:"tabbar"}))}),$t=Ct,Nt=(n("7d85"),Object(b["a"])($t,K,J,!1,null,"7eadf1a1",null)),Mt=Nt.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"setup-bar"},[n("ul",{staticClass:"content"},[n("li",{staticClass:"part"},[n("button",{staticClass:"toggle-btn icon-chain",class:t.config.open_link_on_external&&"active",on:{click:function(e){t.config.open_link_on_external^=!0}}},[t._v(" 从( "),n("em",{attrs:{"data-off":"内","data-on":"外"}}),t._v(" )部标签打开链接 ")]),n("button",{staticClass:"toggle-btn icon-cloud",class:t.config.no_suggestion&&"active",on:{click:function(e){t.config.no_suggestion^=!0}}},[t._v(" ( "),n("em",{attrs:{"data-off":"使用","data-on":"禁止"}}),t._v(" )第三方输入建议 ")])]),n("li",{staticClass:"part",staticStyle:{"border-left":"1px solid #aaa"}},[n("button",{staticClass:"btn icon-plus-square-o",style:{boxShadow:"EditNavgation"===t.$route.name?"0 0 4px 1px #e06000":""},on:{click:function(e){return t.$router._toggle("EditNavgation","Editor")}}},[t._v("添加导航")]),n("button",{staticClass:"btn save icon-star-o",style:{boxShadow:"EditBookmark"===t.$route.name?"0 0 4px 1px #e06000":""},on:{click:function(e){return t.$router._toggle("EditBookmark","Editor")}}},[t._v("编辑书签")])]),n("li",{staticClass:"part",staticStyle:{"border-left":"1px solid #aaa"}},[n("button",{staticClass:"btn save icon-sign-out",on:{click:t.exit}},[t._v("返回&保存")])])])])},It=[],jt=i["a"].extend({computed:Object(l["a"])({},Object(u["c"])({config:"setting"})),methods:{exit:function(){this.$store.dispatch("save"),this.$router._to("Main")}},data:function(){return{open_link_on_external:!1,no_suggestion:!1}}}),Pt=jt,Lt=(n("abe6"),Object(b["a"])(Pt,At,It,!1,null,"728395d4",null)),Ut=Lt.exports,Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"user-layer",on:{touchstart:function(e){t.cursor_down_target=e.target},mousedown:function(e){t.cursor_down_target=e.target},mouseup:function(e){t.cursor_up_target=e.target},touchend:function(e){t.cursor_up_target=e.target},click:function(e){t.cursor_down_target===t.cursor_up_target&&t.cursor_down_target===t.$el&&t.$router._exit()}}},[n("div",{staticClass:"container"},[n("input",{staticClass:"trigger",attrs:{id:"login_trigger",type:"radio",name:"tab-trigger",checked:""}}),n("label",{staticClass:"tab",attrs:{for:"login_trigger"}},[t._v("登录")]),n("input",{staticClass:"trigger",attrs:{id:"regist_trigger",type:"radio",name:"tab-trigger"}}),n("label",{staticClass:"tab",attrs:{for:"regist_trigger"}},[t._v("注册")]),n("br"),n("login-box",{staticClass:"tab-content"}),n("regist-box",{staticClass:"tab-content"})],1)])},Dt=[],Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"login-box",staticStyle:{"margin-top":"-1rem"}},[n("account-input",{attrs:{allow_status:212},on:{success:function(e){t.$refs.captcha_input.index||t.$refs.captcha_input.update()}},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),n("li",{class:t.password_status},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"密码",maxlength:"20"},domProps:{value:t.password},on:{keyup:t.test_password,change:t.check_password,input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("i",{staticClass:"icon-key"})]),n("captcha-input",{ref:"captcha_input",model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}}),n("li",{staticStyle:{"margin-top":"20px"}},[n("button",{class:{loading:t.is_loading,disable:!t.is_complete},on:{click:t.login}},[t._v("登录")])])],1)},Ht=[],zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:t.status},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input_value,expression:"input_value"}],attrs:{placeholder:"账号",spellcheck:"false",maxlength:"15"},domProps:{value:t.input_value},on:{keyup:t.test,change:t.check,input:function(e){e.target.composing||(t.input_value=e.target.value)}}}),n("i",{staticClass:"icon-user"})])},Ft=[],qt=(n("96cf"),n("1da1")),Yt=i["a"].extend({methods:{test:function(){this.value.length<6?this.status=this.pre_regexp.test(this.value)?"":"error":this.status=this.regexp.test(this.value)?"success":"error"},check:function(){var t=this;return Object(qt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.regexp.test(t.value)){e.next=7;break}return e.next=3,t.global_check("account",t.value);case 3:n=e.sent,n===t.allow_status?(t.status="success",t.$emit("success")):t.status="error",e.next=8;break;case 7:t.status="error";case 8:case"end":return e.stop()}}),e)})))()}},computed:Object(l["a"])({},Object(u["b"])({global_check:"check"}),{input_value:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}),model:{prop:"value",event:"input"},props:{value:{type:String,default:""},allow_status:Number},data:function(){return{status:"",pre_regexp:/^[a-zA-Z_]\w*$/,regexp:/^[a-zA-Z_]\w{5,14}$/}}}),Vt=Yt,Xt=Object(b["a"])(Vt,zt,Ft,!1,null,null,null),Wt=Xt.exports,Gt=function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("li",{staticClass:"hidden",class:(t={show:e.index||e.loading},t[e.status]=!0,t)},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.input_value,expression:"input_value"}],staticClass:"left",attrs:{spellcheck:"false",placeholder:"验证码",maxlength:"4"},domProps:{value:e.input_value},on:{input:function(t){t.target.composing||(e.input_value=t.target.value)}}}),i("i",{staticClass:"icon-barcode"}),i("b",{staticClass:"right captcha icon-refresh",class:e.loading&&"loading",style:{backgroundImage:"url("+e.img+")"},on:{click:e.update}})])},Kt=[],Jt=(n("1276"),n("3835")),Qt=i["a"].extend({methods:{test:function(){var t=this;return Object(qt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(4!==t.value.length){e.next=7;break}return e.next=3,t.checkCaptcha(t.index,t.value.toLocaleUpperCase());case 3:n=e.sent,t.status=n?"success":"error",e.next=8;break;case 7:t.status="";case 8:case"end":return e.stop()}}),e)})))()},update:function(){var t=this;return Object(qt["a"])(regeneratorRuntime.mark((function e(){var n,i,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading){e.next=11;break}return t.loading=!0,e.next=4,t.getCaptcha();case 4:n=e.sent.split("&"),i=Object(Jt["a"])(n,2),o=i[0],a=i[1],t.index=o,t.img=a,t.loading=!1;case 11:case"end":return e.stop()}}),e)})))()}},watch:{input_value:function(){this.test()}},computed:Object(l["a"])({},Object(u["b"])(["getCaptcha","checkCaptcha"]),{input_value:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}),model:{prop:"value",event:"input"},props:{value:{type:String,default:""}},data:function(){return{status:"",img:"",index:null,loading:!1}}}),Zt=Qt,te=Object(b["a"])(Zt,Gt,Kt,!1,null,null,null),ee=te.exports,ne=i["a"].extend({mounted:function(){},watch:{account:function(t,e){},password:function(t,e){},captcha:function(t,e){}},components:{AccountInput:Wt,CaptchaInput:ee},computed:Object(l["a"])({},Object(u["b"])(["markToken"]),{is_complete:function(){return 4===this.captcha.length&&this.regs.account.test(this.account)&&this.regs.password.test(this.password)}}),methods:{test_password:function(){this.password_status=this.regs.pre_password.test(this.password)?"":"error"},check_password:function(){this.password_status=this.regs.password.test(this.password)?"":"error"},login:function(){var t=this;if(!this.is_loading&&this.is_complete){this.is_loading=!0;var e=this.markToken({account:this.account,password:this.password,index:this.$refs.captcha_input.index,captcha:this.captcha}),n=e.key,i=e.token;window.request(this.$store.state.apis.login,(function(e){t.is_loading=!1,200===e.status?(t.$router._exit("Main"),t.$store.state.client.connect(e.responseText,n)):(t.$refs.captcha_input.update(),alert("登录信息有误"))}),i)}}},data:function(){return{password_status:"",is_loading:!1,regs:{account:/^[a-zA-Z_]\w{5,14}$/,password:/^[\x21-\x7e]{6,20}$/,pre_password:/^[\x21-\x7e]{0,20}$/,email:/^(?=.{5,320})\w+(\.\w+)*@\w+(\.\w+)+$/},account:"",password:"",captcha:""}}}),ie=ne,oe=Object(b["a"])(ie,Bt,Ht,!1,null,"fd9f478e",null),ae=oe.exports,se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"regist-box"},[n("account-input",{attrs:{allow_status:200},on:{success:function(e){t.$refs.captcha_input.index||t.$refs.captcha_input.update()}},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),n("li",{class:t.password_status},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{placeholder:"密码",type:"password",maxlength:"20"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("i",{staticClass:"icon-key"})]),n("li",{class:t.re_password_status},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.re_password,expression:"re_password"}],attrs:{placeholder:"密码",type:"password",maxlength:"20"},domProps:{value:t.re_password},on:{input:function(e){e.target.composing||(t.re_password=e.target.value)}}}),n("i",{staticClass:"icon-key"})]),n("li",{class:t.email_status},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{placeholder:"邮箱地址",spellcheck:"false",maxlength:"320"},domProps:{value:t.email},on:{change:t.checkEmail,input:function(e){e.target.composing||(t.email=e.target.value)}}}),n("i",{staticClass:"icon-envelope"})]),n("captcha-input",{ref:"captcha_input",model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}}),n("li",{staticStyle:{"margin-top":"20px"}},[n("button",{class:{loading:t.is_loading,disable:!t.is_complete},on:{click:t.regist}},[t._v("注册")])])],1)},re=[],ce=i["a"].extend({components:{AccountInput:Wt,CaptchaInput:ee},methods:{regist:function(){var t=this;if(!this.is_loading&&this.is_complete){this.is_loading=!0;var e=this.markToken({account:this.account,password:this.password,email:this.email,index:this.$refs.captcha_input.index,captcha:this.captcha}),n=e.key,i=e.token;window.request(this.$store.state.apis.regist,(function(e){if(t.is_loading=!1,200===e.status){t.$router._exit("Main");var i=t.$store.state.client;i.connect(e.responseText,n,(function(e){"open"===e&&i.once("etag-list",(function(e){return t.$store.dispatch("save",!0),!0}))}))}else t.$refs.captcha_input.update(),alert("注册信息有误")}),i)}},getStatus:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t?t.length+n>e.length?this.regs.password.test(t)?"success":"error":0===e.indexOf(t)?"":"error":""},checkEmail:function(){var t=this;return Object(qt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("success"!==t.email_status){e.next=5;break}return e.next=3,t.check("email",t.email);case 3:n=e.sent,t.email_status=200===n?"success":"error";case 5:case"end":return e.stop()}}),e)})))()}},computed:Object(l["a"])({is_complete:function(){return 4===this.captcha.length&&this.regs.account.test(this.account)&&"success"===this.password_status&&"success"===this.re_password_status&&this.regs.email.test(this.email)}},Object(u["b"])(["check","markToken"])),watch:{email:function(){this.email_status=this.email?this.regs.email.test(this.email)?"success":"error":""},password:function(t,e){this.password_status=this.getStatus(this.password,this.re_password,1),this.re_password_status=this.password===this.re_password?this.password_status:this.getStatus(this.re_password,this.password)},re_password:function(t,e){this.re_password_status=this.getStatus(this.re_password,this.password,1),this.password_status=this.re_password===this.password?this.re_password_status:this.getStatus(this.password,this.re_password)}},data:function(){return{email_status:"",re_password_status:"",password_status:"",account:"",password:"",re_password:"",email:"",is_loading:!1,regs:{account:/^[a-zA-Z_]\w{5,14}$/,password:/^[\x21-\x7e]{6,20}$/,email:/^(?=.{5,320})\w+(\.\w+)*@\w+(\.\w+)+$/},captcha:""}}}),le=ce,ue=Object(b["a"])(le,se,re,!1,null,null,null),he=ue.exports,de=i["a"].extend({mounted:function(){},components:{LoginBox:ae,RegistBox:he},data:function(){return{cursor_down_target:null,cursor_up_target:null}}}),pe=de,fe=(n("8653"),n("c5e7"),Object(b["a"])(pe,Rt,Dt,!1,null,"433fe046",null)),_e=fe.exports;i["a"].use(s["a"]);var ve=[{path:"/",name:"Main",components:{default:z,footer:Mt}},{path:"/editor",name:"Editor",components:{default:z,footer:Ut}},{path:"/editor/navgation",name:"EditNavgation",components:{default:z,footer:Ut}},{path:"/editor/bookmark",name:"EditBookmark",components:{default:z,footer:Ut,side:G}},{path:"/bookmark",name:"Bookmark",components:{default:z,side:G,footer:Mt}},{path:"/user",name:"User",components:{default:z,footer:Mt,modal_layer:_e}}],me=new s["a"]({base:"/",routes:ve});function ge(t){var e=[];t.afterEach((function(t,n){e.push(t)})),t._history=e,t._exit=function(n){var i;t._toggle(null===(i=e[e.length-1])||void 0===i?void 0:i.name,n)},t._to=function(n){var i=e[e.length-1].name;i!==n&&t._toggle(n)},Object.defineProperty(t,"_route",{value:function(){return e[e.length-1]}}),t._toggle=function(n,i){var o,a=e[e.length-2],s=null===(o=e[e.length-1])||void 0===o?void 0:o.name,r=a&&a.name;s===n&&r&&r!==n&&(!i||i===r)||s!==n&&r===n?t.push({name:r}):s!==n?t.push({name:n}):t.push({name:i||"Main"})}}ge(me);var we,be=me,ye=i["a"].extend({mounted:function(){var t=this;window.requestAnimationFrame((function(){t.inited=!0}))},router:be,data:function(){return{inited:!1}}}),ke=ye,xe=(n("183a"),Object(b["a"])(ke,o,a,!1,null,null,null)),Oe=xe.exports,Ee=(n("4160"),n("d81d"),n("b64b"),n("d3b7"),n("159b"),n("53ca")),Se="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCu/6F9wpikklvZzEkxpGOvL/2Lcd1m/PY8N0uqmdm4V3ZVQdv+b37EBDAPov8VHz3mwCPPRRUBMF3PEysRxfiUgoVT5wxH0j8sCzwYRFNoy2icPbxn4xQ81APe4Fw4XLDdYbDJAdI3KpT6WQNYPDccXZNd5oAy7n/PqxSQBIopQwIDAQAB",Te=n("720d"),Ce=n.n(Te),$e=(n("466d"),n("d4ec")),Ne=n("bee2"),Me=n("c198"),Ae=n.n(Me),Ie=n("f8d5"),je=n.n(Ie);(function(t){t[t["OFF"]=4e3]="OFF",t[t["LOGOUT"]=4001]="LOGOUT",t[t["TIMEOUT"]=4002]="TIMEOUT",t[t["VAGUE"]=4003]="VAGUE",t[t["WILD"]=4004]="WILD",t[t["IMPOLITE"]=4005]="IMPOLITE",t[t["MAX"]=4006]="MAX",t[t["BAD"]=4007]="BAD",t[t["NONE"]=4008]="NONE",t[t["ERROR"]=4009]="ERROR"})(we||(we={}));var Pe=function(){function t(){var e=this;Object($e["a"])(this,t),this.sid=null,this.key=null,this.socket=null,this.aes_option={iv:je.a.parse("")},this.once_list={},this.diff_time=0,this.is_busy=!1,this.onmessage=function(t){var n,i,o=t.data;"string"===typeof o?(o=Ae.a.decrypt(o,e.key,e.aes_option).toString(je.a),n=o.match(/^[^&]+/)[0],i=o.slice(n.length+1)):(n="file",i=o),e.dispense(n,i)},this.onopen=function(){e.trigger("connect","open"),hn.state.userinfo.status=1},this._nreconnect=3,this.onclose=function(t){switch(e.trigger("connect","close"),e.socket=null,hn.state.userinfo.status=-1,t.code){case we.LOGOUT:case we.TIMEOUT:case we.WILD:case we.VAGUE:case we.NONE:case we.ERROR:localStorage.setItem("sid",""),localStorage.setItem("key","");break}switch(t.code){case we.LOGOUT:for(var n=0,i=["etag-navigation","etag-setting","etag-bookmark","etag-cache"];n<i.length;n++){var o=i[n];localStorage.setItem(o,"")}break}},this.onerror=function(){e.trigger("connect","error"),e.socket=null,hn.state.userinfo.status=-1,--e._nreconnect>=0&&e.connect()}}return Object(Ne["a"])(t,[{key:"connect",value:function(t,e,n){var i=this;if(!this.is_busy&&!this.socket&&("function"===typeof t&&(n=t,t=null),t&&e&&(localStorage.setItem("key",e),localStorage.setItem("sid",Ae.a.decrypt(t,je.a.parse(e),{iv:je.a.parse("")}).toString(je.a))),this.sid=localStorage.getItem("sid"),this.key=localStorage.getItem("key"),this.key&&(this.key=je.a.parse(this.key)),this.key&&this.sid)){this.is_busy=!0;var o=hn.state.apis,a=o.timestamp,s=o.websocket;return window.request(a,(function(t){if(i.is_busy=!1,200===t.status){hn.state.userinfo.status=0,i.diff_time=Date.now()-Number(t.responseText)||0;var e=Ae.a.encrypt(t.responseText,i.key,i.aes_option).toString();i.socket=new WebSocket(s+"?".concat(i.sid,"&").concat(e)),i.socket.onopen=i.onopen,i.socket.onclose=i.onclose,i.socket.onmessage=i.onmessage,i.socket.onerror=i.onerror}else i.trigger("connect",!1)})),n&&this.once("connect",n),!0}}},{key:"updateEtag",value:function(t,e){var n="etag-"+t;localStorage.getItem(n)!==e&&this.send("get",t,["return-"+t,function(t){localStorage.setItem(n,e)}])}},{key:"trigger",value:function(t){var e=this.once_list[t];if(e){delete this.once_list[t];for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return e.apply(void 0,i)}}},{key:"dispense",value:function(t,e){var n;if(!this.trigger(t,e))switch(t){case"etag-list":for(var i in n=JSON.parse(e),n)this.updateEtag(i,n[i]);break;case"info-logon":n=JSON.parse(e),hn.state.userinfo.account=n.account,hn.state.userinfo.connectCount=n.connectCount;break;case"saved-navigation":case"saved-bookmark":case"saved-setting":localStorage.setItem("etag-"+t.slice(6),e);break;case"return-navigation":case"return-bookmark":case"return-setting":case"return-cache":localStorage.setItem(t.slice(7),e),hn.commit("update_"+t.slice(7),e);break;case"etag-navigation":case"etag-bookmark":case"etag-setting":case"etag-cache":this.updateEtag(t.slice(5),e);break;default:break}}},{key:"_send",value:function(t){this.socket.send(Ae.a.encrypt(t,this.key,this.aes_option))}},{key:"once",value:function(t,e){this.once_list[t]=e}},{key:"send",value:function(t,e,n){n instanceof Array&&this.once(n[0],n[1]),this._send(t?t+"&"+e:e)}}]),t}(),Le=new Pe,Ue=new Ce.a;Ue.setPublicKey(Se),i["a"].use(u["a"]);var Re=0;function De(){return++Re}var Be=10;function He(){return++Be}function ze(t){return t.map((function(t){return{history:t.history,index:t.index,state:t.state}}))}function Fe(t){function e(t){return t instanceof Array?t.map((function(t){return Object(l["a"])({type:t.type,title:t.title},"box"!==t.type&&{icon:t.icon},{content:e(t.content),col:t.col,row:t.row,colspan:t.colspan,rowspan:t.rowspan})})):t}return{width:t.width,ncols:t.ncols,content:e(t.content)}}function qe(t){return t instanceof Array?t.map((function(t){return Object(l["a"])({type:t.type,title:t.title},"folder"!==t.type&&{icon:t.icon},{content:qe(t.content)})})):t}function Ye(t){function e(t){if("string"===typeof t)return t;if(t instanceof Array)return t.map(e);var n=t.w,i=void 0===n?2:n,o=t.h,a=void 0===o?2:o,s=t.x,r=void 0===s?0:s,c=t.y,u=void 0===c?0:c,h=t.content,d=t.type,p=void 0===d?"strip":d,f=t.icon,_=t.title;return Object(l["a"])({type:p,title:_},f&&{icon:f},{col:4*r|0,row:u,colspan:4*i|0,rowspan:a,content:e(h)})}var n=void 0===t.ncols?{width:4*t.col*60,ncols:4*t.col,content:e(t.content)}:t;function i(t){"string"!==typeof t&&(t instanceof Array?t.forEach(i):(t._id=De(),t.dragging=!1,t.zIndex=t.width=t.height=t.left=t.top=0,t.content&&i(t.content),t.editing=!1))}return i(n.content),n}function Ve(t){var e,n=Object(p["a"])(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;i._id=De(),i.translateX=0}}catch(o){n.e(o)}finally{n.f()}return t}function Xe(t){var e,n=Object(p["a"])(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;i._id=De(),i.translateX=0,i.translateY=0,i.dragging=!1,i.using=!1,"string"!==typeof i.type&&(i.type=1===i.type?"folder":"item"),"folder"===i.type&&i.content instanceof Array&&Xe(i.content)}}catch(o){n.e(o)}finally{n.f()}return t}function We(t){return{open_link_on_external:!!t.open_link_on_external,no_suggestion:!!t.no_suggestion}}function Ge(t){return t.replace(/.*?:\/\/(www\.)?/,"")}function Ke(t){return t.replace(/^(.*:\/\/)?([^/?#]*).*$/,"$1$2/favicon.ico")}function Je(t){var e,n;return"object"===Object(Ee["a"])(t)&&(e=t.title,n=t.icon,t=t.url),t?{url:t,title:e||Ge(t),icon:n||Ke(t),state:0}:{state:4}}var Qe={},Ze={bookmark:[{type:"item",title:"书签栏",icon:"",content:""},{type:"item",title:"按设置按钮进入编辑模式后",icon:"",content:""},{type:"folder",title:"内容支持从不同文件夹拖放",content:[{type:"item",title:"百度一下",icon:"https://www.baidu.com/favicon.ico",content:"https://www.baidu.com"},{type:"folder",title:"新建文件夹",content:[]}]},{type:"item",title:"支持从书签至导航来回拖放",icon:"",content:""},{type:"item",title:"随意新增或删除书签",icon:"",content:""},{type:"item",title:"百度一下",icon:"http://www.baidu.com/favicon.ico",content:"https://www.baidu.com"},{type:"item",title:"点击右侧登录",icon:"",content:""},{type:"item",title:"登录后可多浏览器即时同步",icon:"",content:""}],navigation:{width:960,ncols:16,content:[{type:"block",title:"百度一下",icon:"https://www.baidu.com/favicon.ico",content:"https://www.baidu.com",col:0,row:2,colspan:4,rowspan:4},{type:"strip",title:"淘宝",icon:"https://taobao.com/favicon.ico",content:"https://www.taobao.com",col:4,row:0,colspan:4,rowspan:1},{type:"strip",title:"新浪网",icon:"https://www.sina.com.cn/favicon.ico",content:"https://www.sina.com.cn",col:12,row:1,colspan:4,rowspan:1},{type:"strip",title:"网易",icon:"https://www.163.com/favicon.ico",content:"https://www.163.com",col:8,row:1,colspan:4,rowspan:1},{type:"strip",title:"京东",icon:"https://www.jd.com/favicon.ico",content:"https://www.jd.com",col:0,row:0,colspan:4,rowspan:1},{type:"box",title:"视频",content:[{type:"strip",title:"斗鱼",icon:"http://www.douyutv.com/favicon.ico",content:"https://www.douyutv.com",col:0,row:0,colspan:8,rowspan:2},{type:"strip",title:"虎牙",icon:"https://www.huya.com/favicon.ico",content:"https://www.huya.com",col:8,row:0,colspan:8,rowspan:2},{type:"strip",title:"bilibili直播",icon:"https://live.bilibili.com/favicon.ico",content:"https://live.bilibili.com",col:16,row:0,colspan:8,rowspan:2},{type:"strip",title:"爱奇艺",icon:"https://www.iqiyi.com/favicon.ico",content:"https://www.iqiyi.com",col:0,row:2,colspan:8,rowspan:2},{type:"strip",title:"芒果tv",icon:"https://www.mgtv.com/favicon.ico",content:"https://www.mgtv.com",col:8,row:2,colspan:8,rowspan:2},{type:"strip",title:"腾讯视频",icon:"https://v.qq.com/favicon.ico",content:"https://v.qq.com/",col:16,row:2,colspan:8,rowspan:2}],col:8,row:6,colspan:8,rowspan:3},{type:"strip",title:"今日头条",icon:"https://www.toutiao.com/favicon.ico",content:"https://www.toutiao.com/",col:4,row:1,colspan:4,rowspan:1},{type:"strip",title:"今日热榜",icon:"https://tophub.today/favicon.ico",content:"https://tophub.today/",col:0,row:1,colspan:4,rowspan:1},{type:"strip",title:"bilibili",icon:"https://www.bilibili.com/favicon.ico",content:"https://www.bilibili.com",col:4,row:3,colspan:4,rowspan:1},{type:"box",title:"工具",content:[{type:"strip",title:"百度翻译",icon:"https://fanyi.baidu.com/favicon.ico",content:"https://fanyi.baidu.com/",col:8,row:5,colspan:8,rowspan:2},{type:"strip",title:"百度地图",icon:"https://map.baidu.com/favicon.ico",content:"https://map.baidu.com/",col:0,row:5,colspan:8,rowspan:2},{type:"strip",title:"waifu2x",icon:"http://waifu2x.udp.jp/favicon.ico",content:"http://waifu2x.udp.jp/",col:8,row:0,colspan:8,rowspan:2},{type:"strip",title:"tinypng",icon:"https://tinypng.com/images/favicon.ico",content:"https://tinypng.com/",col:0,row:0,colspan:8,rowspan:2},{type:"strip",title:"二维码",icon:"https://static.clewm.net/static/images/favicon.ico",content:"https://cli.im",col:8,row:2,colspan:8,rowspan:2},{type:"strip",title:"在线PS",icon:"https://www.uupoop.com/favicon.ico",content:"https://www.uupoop.com/",col:0,row:2,colspan:8,rowspan:2},{type:"strip",title:"网页微信",icon:"https://res.wx.qq.com/a/wx_fed/assets/res/NTI4MWU5.ico",content:"https://wx.qq.com",col:8,row:7,colspan:8,rowspan:2},{type:"strip",title:"百度网盘",icon:"https://pan.baidu.com/static/images/favicon.ico",content:"https://pan.baidu.com",col:16,row:5,colspan:8,rowspan:2},{type:"strip",title:"aconvert",icon:"https://www.aconvert.com/favicon.ico",content:"https://www.aconvert.com",col:16,row:0,colspan:8,rowspan:2},{type:"strip",title:"slack",icon:"https://slack.com/favicon.ico",content:"https://slack.com/",col:0,row:7,colspan:8,rowspan:2},{type:"strip",title:"酷我音乐",icon:"http://www.kuwo.cn/favicon.ico",content:"http://www.kuwo.cn",col:16,row:7,colspan:8,rowspan:2},{type:"strip",title:"everypixel",icon:"https://www.everypixel.com/favicon.ico",content:"https://www.everypixel.com/",col:16,row:2,colspan:8,rowspan:2}],col:0,row:6,colspan:8,rowspan:5},{type:"strip",title:"58同城",icon:"https://bj.58.com/favicon.ico",content:"https://bj.58.com/",col:8,row:5,colspan:4,rowspan:1},{type:"strip",title:"拼多多",icon:"https://www.pinduoduo.com/favicon.ico",content:"https://www.pinduoduo.com",col:8,row:0,colspan:4,rowspan:1},{type:"strip",title:"AcFUN",icon:"https://www.acfun.cn/favicon.ico",content:"https://www.acfun.cn/",col:12,row:3,colspan:4,rowspan:1},{type:"strip",title:"腾讯动漫",icon:"https://ac.qq.com/favicon.ico",content:"https://ac.qq.com/",col:8,row:3,colspan:4,rowspan:1},{type:"strip",title:"知乎",icon:"https://www.zhihu.com/favicon.ico",content:"https://www.zhihu.com",col:12,row:4,colspan:4,rowspan:1},{type:"strip",title:"贴吧",icon:"https://tieba.baidu.com/favicon.ico",content:"https://tieba.baidu.com/",col:4,row:4,colspan:4,rowspan:1},{type:"box",title:"",content:[{type:"strip",title:"360导航",icon:"https://hao.360.com/favicon.ico",content:"https://hao.360.com/",col:0,row:0,colspan:8,rowspan:2},{type:"strip",title:"搜狗导航",icon:"https://123.sogou.com/favicon.ico",content:"https://123.sogou.com/",col:8,row:2,colspan:8,rowspan:2},{type:"strip",title:"hao123",icon:"https://www.hao123.com/favicon.ico",content:"https://www.hao123.com",col:8,row:0,colspan:8,rowspan:2},{type:"strip",title:"2345",icon:"https://www.2345.com/favicon.ico",content:"https://www.2345.com/",col:0,row:2,colspan:8,rowspan:2},{type:"strip",title:"QQ导航",icon:"https://hao.qq.com/favicon.ico",content:"https://hao.qq.com/",col:16,row:0,colspan:8,rowspan:2}],col:8,row:9,colspan:8,rowspan:2},{type:"strip",title:"微博",icon:"https://weibo.com/favicon.ico",content:"https://weibo.com/",col:8,row:4,colspan:4,rowspan:1},{type:"strip",title:"苏宁易购",icon:"https://www.suning.com/favicon.ico",content:"https://www.suning.com",col:12,row:0,colspan:4,rowspan:1},{type:"strip",title:"赶集网",icon:"http://www.ganji.com/favicon.ico",content:"http://www.ganji.com/",col:12,row:5,colspan:4,rowspan:1}]},tabbar:[{history:[{state:4}],index:0,state:1}],cache:{"https://www.baidu.com":"http://www.holdhot.com/img/fodder1.jpg"},search_history:{},browse_history:{},setting:{open_link_on_external:!1,no_suggestion:!1}};for(var tn in Ze){var en=localStorage.getItem(tn);try{en&&(en=JSON.parse(en))}catch(dn){}en&&"string"!==typeof en||(en=Ze[tn]),Qe[tn]=en}var nn=Qe.setting,on=Qe.browse_history,an=Qe.search_history,sn=Qe.cache,rn=Qe.tabbar,cn=Qe.navigation,ln=Qe.bookmark;nn=We(nn),rn=Ve(rn),cn=Ye(cn),ln=Xe(ln),window.addEventListener("unload",(function(){localStorage.setItem("search_history",JSON.stringify(an)),localStorage.setItem("browse_history",JSON.stringify(on)),localStorage.setItem("tabbar",JSON.stringify(ze(rn)))}));var un=new u["a"].Store({state:{client:Le,jsencrypt:Ue,userinfo:{account:null,connectCount:0,timeout:0,status:-1},apis:{websocket:"ws://119.23.10.174:5678/",timestamp:"http://www.holdhot.com/control/timestamp",regist:"http://www.holdhot.com/control/register/ack",login:"http://www.holdhot.com/control/logon",syn:"http://www.holdhot.com/control/register/syn?${key}=${value}",captcha:"http://www.holdhot.com/img/captcha",check_captcha:"http://www.holdhot.com/img/captcha?${key}&${value}"},search_history:an,browse_history:on,tabbar:{capture_mouse:!1,active:void 0,content:rn,content_set:[],STATES:{NORMAL:0,ACTIVE:1,HOME:4,CHANGE:2,LOADING:8,ABORT:16}},navigation:cn,bookmark:ln,setting:nn,default:{icon:"http://www.holdhot.com/img/page.png",favicon:"http://www.holdhot.com/img/home.png",tab_name:"新标签",search_url:"https://www.baidu.com/s?wd=${$}"},cache:sn},getters:{tabbar_content_set:function(t){for(var e=t.tabbar,n=e.content,i=e.content_set,o=i.length-1;o>=0;o--){var a=i[o];-1===n.indexOf(a)&&i.splice(o,1)}for(var s=n.length-1;s>=0;s--){var r=n[s];-1===i.indexOf(r)&&i.push(r)}return i},active_record:function(t){var e=t.tabbar.active;return e&&e.history[e.index]},markToken:function(){return function(t){var e=t.index,n=t.captcha,i=t.account,o=t.password,a=t.email,s="";while(s.length<22)s+=Math.random().toString(36).slice(2);s=s.slice(0,22);var r="".concat(e,":").concat(n.toLocaleUpperCase()).concat(s),c=Ue.encrypt("act=".concat(i,"&pwd=").concat(o).concat(a?"&email=".concat(a):"","&key=").concat(r));return{key:r,token:c}}},check:function(){return function(t,e){return new Promise((function(n,i){window.request(String.attr(un.state.apis.syn,{key:t,value:e}),(function(t){n(t.status)}))}))}},getCaptcha:function(){return function(){return new Promise((function(t,e){window.request(un.state.apis.captcha,(function(e){t(e.responseText)}))}))}},checkCaptcha:function(){return function(t,e){return new Promise((function(n,i){window.request(String.attr(un.state.apis.check_captcha,{key:t,value:e}),(function(t){n(200===t.status)}))}))}},getUniqueID:function(){return De},getTopIndex:function(){return He},extractTitle:function(){return Ge},extractIcon:function(){return Ke}},mutations:{add_record:function(t,e){var n=e.history,i=e.record,o=" "+i,a=n[o],s=Object.keys(n),r=s.length;a?n[o]+=60:n[o]=(n[s[Math.min(r,4)-1]]||0)+1,Object.sort(n,!0)},add_search_record:function(t,e){var n=t.search_history;this.commit("add_record",{history:n,record:e})},add_browse_record:function(t,e){var n=t.browse_history;this.commit("add_record",{history:n,record:e})},activite_tab:function(t,e){var n=t.tabbar;n.active&&(n.active.state&=~n.STATES.ACTIVE),n.active=e,e.state|=n.STATES.ACTIVE},go:function(t,e){var n=t.tabbar;if(n.active){var i=n.active,o=i.history,a=o.length-i.index-1;a>0&&o.splice(i.index+1,a),o[i.index].state&n.STATES.HOME||(o[i.index].state=n.STATES.NORMAL),o.push(Je(e)),i.index++}else this.commit("new_tab",e)},new_tab:function(t,e){var n=t.tabbar,i=n.content,o=n.STATES,a={history:[Je(e)],index:0,state:o.NORMAL,_id:De(),translateX:0};i.push(a),this.commit("activite_tab",a)},update_navigation:function(t,e){t.navigation=Ye(JSON.parse(e)),localStorage.setItem("navigation",e)},update_bookmark:function(t,e){t.bookmark=Xe(JSON.parse(e)),localStorage.setItem("bookmark",e)},update_setting:function(t,e){t.setting=We(JSON.parse(e)),localStorage.setItem("setting",e)},update_cache:function(t,e){t.cache=JSON.parse(e),localStorage.setItem("cache",e)}},actions:{save:function(t,e){var n=t.state,i={navigation:Fe,bookmark:qe,setting:We};function o(){var t=function(t){var o=JSON.stringify(i[t](n[t]));(e||o!==localStorage.getItem(t))&&n.client.send("set-"+t,o,["saved-"+t,function(){localStorage.setItem(t,o)}])};for(var o in i)t(o)}if(n.client.socket)o();else for(var a in i)localStorage.setItem(a,JSON.stringify(i[a](n[a])))}},modules:{}}),hn=un;n("4a01"),n("5595");i["a"].config.productionTip=!1,hn.state.client.connect(),i["a"].directive("catch-icon",{bind:function(t){t.onerror=function(){t.src=hn.state.default.icon};var e=window.setTimeout(t.onerror,2e3);t.onload=function(){window.clearTimeout(e)}}}),new i["a"]({store:hn,render:function(t){return t(Oe)}}).$mount("#wrapper")},"5e88":function(t,e,n){},6112:function(t,e,n){},6581:function(t,e,n){"use strict";var i=n("d4e1"),o=n.n(i);o.a},"676e":function(t,e,n){},"6b36":function(t,e,n){},"6c95":function(t,e,n){"use strict";var i=n("781a"),o=n.n(i);o.a},"71d3":function(t,e,n){"use strict";n("99af"),n("4160"),n("c975"),n("a15b"),n("d81d"),n("13d5"),n("fb6a"),n("45fc"),n("a434"),n("b64b"),n("ac1f"),n("466d"),n("1276"),n("159b");var i=n("ded3"),o=n("6374"),a=n("3c96"),s=n("2d0d"),r=n("ed6d"),c=n("970b"),l=n("5bc3"),u=n("9523"),h={rotate:/^rotate$/,pinch:/^pinch$/,dragMove2:/^dragMove2$/,dragStart:/^dragStart$/,dragMove:/^dragMove$/,dragEnd:/^dragEnd$/,click:/^click$/},d={keyDown:/^\S+_keyDown$/,keyUp:/^\S+_keyUp$/,keyPress:/^\S+_keyPress$/},p=function(){function t(e,n){var i=this;c(this,t),u(this,"_activated_listener",{}),u(this,"_registered_listener",{rotate:null,pinch:null,dragMove:null,dragStart:null,dragEnd:null,dragMove2:null,click:null,keyDown:{_parts:[],_reference:0},keyUp:{_reference:0},keyPress:{_reference:0}}),u(this,"mouse_mask",1),u(this,"target",null),u(this,"pointX","pageX"),u(this,"pointY","pageY"),u(this,"_listener_options",void 0),u(this,"_listener_status",{}),u(this,"_points",[]),u(this,"_identifiers",[]);var o=!1;this.target=e,n&&(!0===n?o=!0:(o=["capture","passive","passive"].forEach((function(t){void 0!==n[t]&&((o||(o={}))[t]=n[t])})),["pointX","pointY","mouse_mask"].forEach((function(t){void 0!==n[t]&&(i[t]=n[t])})))),this._listener_options=o}return l(t,[{key:"setListener",value:function(t){for(var e in t)if(!this._listener_status[e]!=!t[e]){var n=f.EVENT_CONFIG[e],i=n[0],o=n[1],a=n[2]||this.target;t[e]?a.addEventListener(i,this[o],this._listener_options):a.removeEventListener(i,this[o],this._listener_options),this._listener_status[e]=!!t[e]}}},{key:"eventDispenser",value:function(t,e){if(this._identifiers[0]===f.MOUSE_EVENT_ID)Math.pow(2,t.button)&this.mouse_mask&&e(t,t,0);else if(t.changedTouches)for(var n=0;n<t.changedTouches.length;n++){var i=this._identifiers.indexOf(t.changedTouches[n].identifier);-1!==i&&e(t,t.changedTouches[n],i)}}},{key:"_is_mouse_event",get:function(){return this._identifiers[0]===f.MOUSE_EVENT_ID}}]),t}();u(p,"EVENT_CONFIG",{MOUSE_DOWN:["mousedown","cursorDown"],MOUSE_MOVE:["mousemove","cursorMove",window],MOUSE_UP:["mouseup","cursorUp",window],TOUCH_START:["touchstart","cursorDown"],TOUCH_MOVE:["touchmove","cursorMove",window],TOUCH_END:["touchend","cursorUp",window],TOUCH_CANCEL:["touchcancel","cursorUp",window],KEY_DOWN:["keydown","keyDown"],KEY_UP:["keyup","keyUp"],KEY_PRESS:["keypress","keyPress"]}),u(p,"CURSOR_EVENT_HANDLES",Object.keys(h)),u(p,"STATES",{IS_DRAG:1,IS_ROTATE:2,IS_PINCH:4,MOUSE_DOWN:"MOUSE_DOWN",MOUSE_MOVE:"MOUSE_MOVE",MOUSE_UP:"MOUSE_UP",TOUCH_START:"TOUCH_START",TOUCH_MOVE:"TOUCH_MOVE",TOUCH_END:"TOUCH_END",TOUCH_CANCEL:"TOUCH_CANCEL",KEY_DOWN:"KEY_DOWN",KEY_UP:"KEY_UP",KEY_PRESS:"KEY_PRESS"}),u(p,"PATTERN_MAP",i({},h,{},d)),u(p,"MOUSE_EVENT_ID",-9007199254740991),u(p,"_PRIVATE_METHODS",{update_key_listener:function(t,e,n,i){f._PRIVATE_METHODS.match_keys(e,(function(e){var o=t[e];o||(o=t[e]=[]);var a=o.indexOf(n);i?a>=0&&(t._reference--,o.length>1?o.splice(a,1):delete t[e]):(t._reference++,~a||o.push(n))}))},match_keys:function(t,e){var n=t.match(/(\w+?| )(?=$|\||,|\+)/g);if(n=n?n.map((function(t){return t.toLocaleLowerCase()})):[],!e)return n;var i,a=o(n);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(e(s))break}}catch(r){a.e(r)}finally{a.f()}},get_keys:function(t){return t.code&&t.key!==t.code?[t.key.toLocaleLowerCase(),t.code.toLocaleLowerCase()]:[t.key.toLocaleLowerCase()]}}),u(p,"_LISTENER_PREPROCESSOR",{keyDown:function(t,e,n){function i(t){var e=t._parent;--t._reference<=0&&e&&(delete e[t._key],i(e))}var a,s=t.slice(0,-8).split(","),r=n?function(t,n,o){if(o){var a=t[n];if(a){var s=a._listeners.indexOf(e);-1!==s&&(a._listeners.splice(s,1),i(a))}}}:function(t,n,i){var o=t[n];o||(o=t[n]={_parent:t,_key:n,_reference:0,_parts:t._parts.concat(n)},o._path=o._parts.join("+"),t._reference++),a.push(o),i&&(o._reference++,o._listeners?-1===o._listeners.indexOf(e)&&o._listeners.push(e):o._listeners=[e])};s.forEach((function(t){a=[this._registered_listener.keyDown],t.split("+").forEach((function(t,e,n){var i=a,s=f._PRIVATE_METHODS.match_keys(t),c=n.length===e+1;a=[];var l,u=o(i);try{for(u.s();!(l=u.n()).done;){var h,d=l.value,p=o(s);try{for(p.s();!(h=p.n()).done;){var _=h.value;r(d,_,c)}}catch(v){p.e(v)}finally{p.f()}}}catch(v){u.e(v)}finally{u.f()}}),this)}),this)},keyUp:function(t,e,n){f._PRIVATE_METHODS.update_key_listener(this._registered_listener.keyUp,t,e,n)},keyPress:function(t,e,n){f._PRIVATE_METHODS.update_key_listener(this._registered_listener.keyPress,t,e,n)}});var f=function(t){r(n,t);var e=s(n);function n(t,i,s){var r;return c(this,n),r=e.call(this,t,s),u(a(r),"_mesh_value",4),u(a(r),"_process_status",0),u(a(r),"_process_values",{kd_tasks:[]}),u(a(r),"cursorDown",(function(t){var e,i=r._points;if(r._identifiers[0]!==n.MOUSE_EVENT_ID)if(t.changedTouches&&i.length<r._max_points){var a,s=o(t.changedTouches);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(-1===r._identifiers.indexOf(c.identifier)){e=c;break}}}catch(l){s.e(l)}finally{s.f()}}else 0===i.length&&Math.pow(2,t.button)&r.mouse_mask&&(e=t);e&&r.addPoint(e,t)})),u(a(r),"_move",(function(t,e,n){var i=r._activated_listener,o=r._points[n],a=e[r.pointX],s=e[r.pointY];if(i.dragMove){var c=[a-o.mx,s-o.my];i.dragMove(t,c,e)?(o.mx=a-c[0],o.my=s-c[1]):(o.mx=a,o.my=s)}i.click&&Math.abs(a-o.dx)+Math.abs(s-o.dy)>r._mesh_value&&(i.click=!1)})),u(a(r),"_move2",(function(t,e,i){var o=n.STATES,a=r._activated_listener,s=r._process_values,c=r._points,l=c[i],u=c[1===i?0:1],h=e[r.pointX]-l.mx,d=e[r.pointY]-l.my;if(a.dragMove2){var p=[h/2,d/2];a.dragMove2(t,p,e)&&(h-=2*p[0],d-=2*p[1])}l.mx=l.mx+h,l.my=l.my+d;var f=(l.mx+u.mx)/2,_=(l.my+u.my)/2;if(a.pinch){var v=Math.sqrt(Math.pow(l.mx-u.mx,2)+Math.pow(l.my-u.my,2));r._process_status&o.IS_PINCH?a.pinch(t,-(s.sd-(s.sd=v))):Math.abs(v-s.sd)>r._mesh_value&&(r._process_status|=o.IS_PINCH,a.pinch(t,-(s.sd-(s.sd=v)),[f,_]))}if(a.rotate){var m=0===i?1:i,g=c[0].mx-c[m].mx,w=c[0].my-c[m].my,b=Math.atan2(w,g);b*s.ra<=0&&(s.ra=-s.ra),r._process_status&o.IS_ROTATE?(a.rotate(t,b-s.ra),s.ra=b):Math.abs(b-s.ra)>.01*Math.PI&&(r._process_status|=o.IS_ROTATE,a.rotate(t,b-s.ra,[f,_]),s.ra=b)}})),u(a(r),"cursorMove",(function(t){r.eventDispenser(t,r._points.length<2?r._move:r._move2)})),u(a(r),"_leave",(function(t,e,i){var a;r._identifiers.splice(i,1),r._points.splice(i,1);var s=n.STATES,c=r._identifiers.length,l=r._activated_listener;switch(!0){case c<1:r.setListener((a={},u(a,s.MOUSE_DOWN,!0),u(a,s.MOUSE_MOVE,!1),u(a,s.MOUSE_UP,!1),u(a,s.TOUCH_MOVE,!1),u(a,s.TOUCH_END,!1),u(a,s.TOUCH_CANCEL,!1),a)),r._process_status=0,t&&(l.dragEnd&&l.dragEnd(t,e),l.click&&l.click(t,e));break;case t&&c<r._max_points:if(r._process_status=s.IS_DRAG,t.targetTouches&&t.targetTouches.length>=r._max_points){var h,d=o(t.targetTouches);try{for(d.s();!(h=d.n()).done;){var p=h.value;if(-1===r._identifiers.indexOf(p.identifier)){r.registPoint(t,p);break}}}catch(f){d.e(f)}finally{d.f()}}break}})),u(a(r),"cursorUp",(function(t){r.eventDispenser(t,r._leave)})),u(a(r),"keyDown",(function(t){var e=r._process_values.kd_tasks;function i(n){if(n){for(var i=n._listeners?n._listeners.length:0,o=0;o<i;o++)if(!0===n._listeners[o](t,n._path))return!0;n._reference>i&&-1===e.indexOf(n)&&e.push(n)}}var a=n._PRIVATE_METHODS.get_keys(t);if(!e.some((function(t){return a.some((function(e){return i(t[e])}))}))){var s,c=o(a);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(i(r._registered_listener.keyDown[l]))break}}catch(u){c.e(u)}finally{c.f()}}})),u(a(r),"keyUp",(function(t){for(var e=n._PRIVATE_METHODS.get_keys(t),i=r._process_values.kd_tasks,a=function(t){e.some((function(e){return-1!==i[t]._parts.indexOf(e)}))&&i.splice(t--,1),s=t},s=0;s<i.length;s++)a(s);var c,l=r._registered_listener.keyUp,u=o(e);try{for(u.s();!(c=u.n()).done;){var h=c.value;l[h]&&l[h].some((function(e){return e(t)}))}}catch(d){u.e(d)}finally{u.f()}})),u(a(r),"keyPress",(function(t){var e,i=n._PRIVATE_METHODS.get_keys(t),a=r._registered_listener.keyPress,s=o(i);try{for(s.s();!(e=s.n()).done;){var c=e.value;a[c]&&a[c].some((function(e){return e(t)}))}}catch(l){s.e(l)}finally{s.f()}})),r.registListener(i),r}return l(n,[{key:"on",value:function(t,e){return this.updateListener(u({},t,e))}},{key:"off",value:function(t,e){return this.updateListener(u({},t,e),!0)}},{key:"activate",value:function(){this.updateListener()}},{key:"disable",value:function(){var t=this;this.setListener(Object.keys(this._listener_status).reduce((function(e,n){return t._listener_status[n]&&(e[n]=!1),e}),{}))}},{key:"updateListener",value:function(t,e){var i,o=this._registered_listener,a=n.STATES;if(t)for(var s in t)for(var r in n.PATTERN_MAP)n.PATTERN_MAP[r].test(s)&&(n._LISTENER_PREPROCESSOR[r]?t[s]&&n._LISTENER_PREPROCESSOR[r].call(this,s,t[s],e):o[r]=e?null:t[s]);this._max_points=o.pinch||o.rotate||o.dragMove2?2:1;var c=!!(o.dragStart||o.dragMove||o.dragMove2||o.dragEnd||o.click||o.pinch||o.rotate);return this.setListener((i={},u(i,a.MOUSE_DOWN,c),u(i,a.TOUCH_START,c),u(i,a.KEY_DOWN,o.keyDown._reference>0),u(i,a.KEY_UP,o.keyDown._reference>0||o.keyUp._reference>0),u(i,a.KEY_PRESS,o.keyPress._reference>0),i)),this}},{key:"break",value:function(){var t=this._identifiers.length;while(--t>=0)this._leave(void 0,void 0,t)}},{key:"removePoint",value:function(t){isNaN(t)&&(t=t?this._identifiers.indexOf(t.identifier||n.MOUSE_EVENT_ID):0),this._leave(void 0,void 0,t)}},{key:"addPoint",value:function(t,e){var i=this._points,o=n.CURSOR_EVENT_HANDLES.length;if(0===i.length){var a=this._registered_listener,s=e&&a.dragStart&&a.dragStart(e,t)||!1;if(!0===s)return;o=0,n.CURSOR_EVENT_HANDLES.reduce((function(t,e){return a[e]&&(!1===s||~s.indexOf(e))?(o++,t[e]=a[e]):delete t[e],t}),this._activated_listener)}(o>1||o>0&&!this._activated_listener.dragStart)&&this.registPoint(e,t)}},{key:"registPoint",value:function(t){var e,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=n.STATES,s=this._points,r=this._activated_listener,c=o[this.pointX],l=o[this.pointY];switch(s.push({dx:c,dy:l,mx:c,my:l}),this._identifiers.push(isNaN(o.identifier)?n.MOUSE_EVENT_ID:o.identifier),s.length){case 1:this._process_status=a.IS_DRAG,i=this._is_mouse_event,this.setListener((e={},u(e,a.MOUSE_DOWN,i),u(e,a.MOUSE_MOVE,i),u(e,a.MOUSE_UP,i),u(e,a.TOUCH_MOVE,!i),u(e,a.TOUCH_END,!i),u(e,a.TOUCH_CANCEL,!i),e));break;case 2:this._process_values.sd=Math.sqrt(Math.pow(s[0].mx-s[1].mx,2)+Math.pow(s[0].my-s[1].my,2)),this._process_values.ra=Math.atan2(s[0].my-s[1].my,s[0].mx-s[1].mx),r.click&&(r.click=!1);break}}},{key:"registListener",value:function(t){this.updateListener(t)}},{key:"removeListener",value:function(t){t&&this.updateListener(t,!0)}}]),n}(p);try{window.InputListener=f}catch(_){}t.exports=f},"781a":function(t,e,n){},"7d85":function(t,e,n){"use strict";var i=n("a686"),o=n.n(i);o.a},"81d6":function(t,e,n){},8653:function(t,e,n){"use strict";var i=n("275f"),o=n.n(i);o.a},"876e":function(t,e,n){"use strict";var i=n("24b6"),o=n.n(i);o.a},9298:function(t,e,n){},"9b97":function(t,e,n){"use strict";var i=n("153a"),o=n.n(i);o.a},"9bc3":function(t,e,n){},a0c5:function(t,e,n){},a454:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"bookmark_wrapper",staticClass:"bookmark-wrapper",on:{mouseenter:function(e){return t.$emit("enter",t.data)},touchstart:function(e){return t.$emit("enter",t.data)}}},[n("section",{ref:"bookmark_container",staticClass:"bookmark-container",class:t.is_edit_mode&&"editor",style:{top:t.offsetTop+"px",zIndex:t.drag_target?2:1}},[n("ul",{ref:"bookmark_list",staticClass:"bookmark-list",style:{transform:"translateY("+-t.scrollTop+"px)",transition:t.drag_target?"none":""},on:{click:t.click}},[t._l(t.content,(function(e){return[n("bookmark-item",t._b({key:e._id,on:{enter:t.enter,delete:function(n){return t.del(e)}}},"bookmark-item",Object.assign({},{data:e},e,{is_edit_mode:t.is_edit_mode}),!1))]}))],2),t.show_scrollbar?n("p",{directives:[{name:"fade",rawName:"v-fade",value:1200,expression:"1200"}],ref:"scroll_bar",staticClass:"bookmark-scrollbar"},[n("ins",{staticClass:"scrollbar-thumb",style:{height:100*t.scrollbar_thumb_height+"%",transform:"translateY("+t.scrollbar_thumb_offset+"px)",transition:t.drag_target?"none":""}})]):t._e(),t.is_edit_mode?[n("ins",{staticClass:"add-edit"},[n("button",{staticClass:"btn add-tag icon-tag",on:{click:function(e){return t.new_item("item")}}},[t._v("添加书签")]),n("button",{staticClass:"btn add-folder icon-folder",on:{click:function(e){return t.new_item("folder")}}},[t._v("添加文件夹")])])]:t._e()],2),t.sub_list?n("bookmark-list",t._b({on:{enter:function(e){return t.clearTimeout(t._enter_timeout)}}},"bookmark-list",t.sub_list,!1)):t._e()],1)},o=[],a=(n("c975"),n("a434"),n("b0c0"),n("a9e3"),n("d3b7"),n("5530")),s=(n("96cf"),n("1da1")),r=n("2b0e"),c=n("2f62"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"bookmark-item",class:{dragging:t.dragging,editor:t.is_edit_mode},style:{transform:"translate("+t.translateX+"px,"+t.translateY+"px)"},on:{mouseenter:function(e){return t.$emit("enter",arguments[0],t.data)},touchstart:function(e){return t.$emit("enter",arguments[0],t.data)}}},["item"===t.type?n("a",{staticClass:"item",attrs:{title:t.title,href:t.content,target:"_blank"}},[n("img",{directives:[{name:"catch-icon",rawName:"v-catch-icon"}],staticClass:"icon",attrs:{src:t.icon}}),n("span",{staticClass:"title"},[t._v(t._s(t.title))])]):"folder"===t.type?n("dfn",{staticClass:"folder"},[n("i",{staticClass:"icon",class:t.using?"icon-folder-open-o":"icon-folder-o"}),n("span",{staticClass:"title"},[t._v(t._s(t.title))]),n("i",{staticClass:"icon icon-chevron-right"})]):t._e(),t.is_edit_mode?[n("button",{staticClass:"btn-edit icon-pencil",on:{click:function(e){t.show_edit_box=!0}}}),n("transition",{attrs:{name:"left-slide"}},[t.show_edit_box?[n("var",{staticClass:"edit-box"},[n("label",{staticClass:"tag-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.data.title,expression:"data.title"}],attrs:{placeholder:"item"===t.type?"书签名":"文件夹名",spellcheck:"false"},domProps:{value:t.data.title},on:{input:function(e){e.target.composing||t.$set(t.data,"title",e.target.value)}}}),n("i",{staticClass:"icon-tag"})]),"item"===t.type?n("label",{staticClass:"link-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.data.content,expression:"data.content"}],attrs:{maxlength:"256",placeholder:"链接",spellcheck:"false"},domProps:{value:t.data.content},on:{input:function(e){e.target.composing||t.$set(t.data,"content",e.target.value)}}}),n("i",{staticClass:"icon-chain"})]):t._e(),n("button",{staticClass:"btn btn-delete icon-close",attrs:{title:"删除"},on:{click:function(e){return t.$emit("delete")}}}),n("button",{staticClass:"btn btn-check icon-check",attrs:{title:"保存"},on:{click:t.save}})])]:t._e()],2)]:t._e()],2)},u=[],h=(n("ac1f"),n("5319"),r["a"].extend({mounted:function(){this.data._vue=this},methods:{open:function(t){this.is_edit_mode?t.preventDefault():(this.$router._exit(),this.$store.state.setting.open_link_on_external||(t.preventDefault(),this.$store.commit("go",{title:this.title,icon:this.icon,url:this.content})))},save:function(){this.show_edit_box=!1,"item"===this.type&&(this.title||this.content?this.content!==this.old_content&&(this.content?(this.old_content=this.content.replace(/(?!^\S+?:\/\/)^/,"http://"),this.content!==this.old_content&&(this.data.content=this.old_content),this.data.icon=this.extractIcon(this.old_content)):this.data.icon=this.data.content=this.old_content=""):this.$emit("delete"))}},watch:{show_edit_box:function(t,e){t&&(this.old_content=this.content)}},computed:Object(a["a"])({},Object(c["b"])(["extractTitle","extractIcon"])),data:function(){return{old_content:this.content,show_edit_box:!1}},props:{data:Object,title:String,icon:String,type:String,content:{type:[Array,String]},_id:Number,translateX:Number,translateY:Number,dragging:Boolean,is_edit_mode:Boolean,_vue:Object,using:Boolean}})),d=h,p=(n("1257"),n("2877")),f=Object(p["a"])(d,l,u,!1,null,"665a943f",null),_=f.exports,v=n("f556"),m=6,g="onwheel"in document.body?"wheel":"mousewheel",w="wheel"===g?function(t){return t.deltaY}:function(t){return-200*t.wheelDelta/240},b=r["a"].extend({mounted:function(){this.$refs.bookmark_container._receive=this.receive,this.inputListener=new v["a"](this.$refs.bookmark_container,{dragStart:this.dragStart,dragMove:this.dragMove,dragEnd:this.dragEnd},{pointX:"clientX",pointY:"clientY"}),this.$refs.bookmark_container.addEventListener(g,this.mouseWheel),this.update()},beforeDestroy:function(){this.drag_target&&this.dragEnd(),this.inputListener.disable()},destroyed:function(){},beforeCreate:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(null,"a454"));case 2:t.$options.components.BookmarkList=e.sent.default;case 3:case"end":return e.stop()}}),e)})))()},directives:{fade:{inserted:function(t,e){t._opacity_timeout=window.setTimeout((function(){t.style.opacity="0.3"}),e.value||1200)},componentUpdated:function(t,e){t.style[window.PROP_TRANSITION]="none",t.style.opacity="1",window.clearTimeout(t._opacity_timeout),t._opacity_timeout=window.setTimeout((function(){t.style[window.PROP_TRANSITION]="",t.style.opacity="0.3"}),e.value||1200)}}},activated:function(){this.update()},components:{BookmarkItem:_},methods:{new_item:function(t){var e=this,n={title:"",icon:"",content:"folder"===t?[]:"",type:t,dragging:!1,using:!1,translateX:0,translateY:0,_id:this.getUniqueID()};this.content.push(n),this.$nextTick((function(){e.$nextTick((function(){e.scrollTop=e.scrollHeight-e.clientHeight,n._vue.show_edit_box=!0}))}))},del:function(t){this.content.splice(this.content.indexOf(t),1)},click:function(t){if(this._click_offset>m)t.preventDefault();else{var e=t.target.getParentNode((function(t){return t.__vue__ instanceof _}));e&&"item"===e.__vue__.type&&e.__vue__.open(t)}},update_offset_top:function(){var t=this,e=this.$refs.bookmark_wrapper.clientHeight,n=this.$refs.bookmark_container.offsetHeight,i=Math.min(e-this.bottom-8,e-n);if(i!==this.offsetTop){if(this.drag_target&&!0!==this.drag_target){var o=this.offsetTop-i;this.$nextTick((function(){t.dragMove(void 0,[0,o])}))}this.offsetTop=i}},update:function(){var t=this;if(this.clientHeight=this.$refs.bookmark_container.clientHeight,this.scrollHeight=this.$refs.bookmark_list.offsetHeight,this.scrollTop>this.scrollHeight-this.clientHeight){if(this.drag_target){var e=this.scrollTop-(this.scrollHeight-this.clientHeight);this.$nextTick((function(){t.dragMove(void 0,[0,e])}))}this.scrollTop=this.scrollHeight-this.clientHeight}this.update_offset_top()},receive:function(t,e,n,i){var o=this;if(-1===this.content.indexOf(i)){var a={icon:i.icon,title:i.title,content:i.content,using:!1,dragging:!0,type:"item",_id:this.getUniqueID(),translateX:0,translateY:0},s=n.top+n.height/2,r=this.content.length/2|0;if(this.content.length>0){var c=this.content[r]._vue.$el.getBoundingClientRect(),l=c.top+c.height/2<s?1:-1;while(r>=0&&r<this.content.length){var u=this.content[r],h=u._vue.$el.getBoundingClientRect(),d=h.top+h.height/2;if(s<=d&&n.bottom>=d||s>d&&n.top<=d)break;r+=l}}return this.content.splice(r<0?0:r,0,a),this.drag_target=a,this.drag_target.dragging=!0,t&&e?this.$nextTick((function(){var t=a._vue.$el.getBoundingClientRect();o._offset_x=n.left-t.left-(t.width-n.width)*(e.clientX-n.left)/n.width,Math.abs(o._offset_x)>10&&(a.translateX=o._offset_x),a.translateY=n.top-t.top-(t.height-n.height)*(e.clientY-n.top)/n.height,o.inputListener.addPoint(e)})):this.dragEnd(),"bookmark"}},mouseWheel:function(t){var e=isNaN(t)?w(t):t;if(this.clientHeight<this.scrollHeight){var n=this.scrollTop+e;n=n<0?0:Math.min(n,this.scrollHeight-this.clientHeight),n!==this.scrollTop&&(this.drag_target&&!0!==this.drag_target&&this.dragMove(void 0,[0,n-this.scrollTop]),this.scrollTop=n,isNaN(t)&&t.preventDefault())}},dragStart:function(t,e){var n=this,i=function(){n._click_offset=0,n.drag_target=!0},o=function(t){n.drag_target=t,n.drag_target.dragging=!0,n._offset_x=0};if(this.is_edit_mode){if(-1===["BUTTON","INPUT"].indexOf(t.target.tagName)){var a=e.target.getParentNode((function(t){return t.__vue__ instanceof _}));if(a)return t.preventDefault(),void(t instanceof MouseEvent?o(a.__vue__.data):(i(),this._longtap_timeout=window.setTimeout((function(){n._click_offset<m&&o(a.__vue__.data)}),300)))}return!0}t instanceof MouseEvent&&t.preventDefault(),i()},dragMove:function(t,e,n){if(!0===this.drag_target)return this._click_offset+=Math.abs(e[0])+Math.abs(e[1]),void this.mouseWheel(-e[1]);var i=this.drag_target;this._offset_x+=e[0];i._vue.$el.offsetWidth;if(i.translateY+=e[1],n&&"item"===i.type)if(Math.abs(this._offset_x)>10){i.translateX=this._offset_x;var o=n.target.getParentNode((function(t){return"function"===typeof t._receive}),5);if(o&&o!==this.$refs.bookmark_container){var a=o._receive(t,n,this.drag_target._vue.$el.getBoundingClientRect(),this.drag_target);if(a)return this.del(this.drag_target),this.dragEnd(t,n),void this.inputListener.break()}}else i.translateX=0;if(0!==e[1]){var s=this.content.indexOf(i),r=s,c=this.content.length;if(e[1]>0)while(r<c-1){var l=this.content[r+1]._vue.$el.offsetHeight;if(!(i.translateY>l/2))break;i.translateY+=-l,r++}else if(s>0)while(r>0){var u=this.content[r-1]._vue.$el.offsetHeight;if(!(i.translateY<-u/2))break;i.translateY+=u,r--}s!==r&&(this.content.splice(s,1),this.content.splice(r,0,i))}},dragEnd:function(t,e){!0!==this.drag_target&&(this.drag_target.dragging=!1,this.drag_target.translateX=0,this.drag_target.translateY=0),window.clearTimeout(this._longtap_timeout),this.drag_target=null},_enter:function(t,e){var n;if((null===(n=this.sub_list)||void 0===n?void 0:n.data)!==e&&(!this.sub_list||this.drag_target&&"folder"!==e.type||(this.sub_list.data.using=!1,this.sub_list=null),"folder"===e.type)){var i=this.$refs.bookmark_wrapper.getBoundingClientRect(),o=t.target.getBoundingClientRect();e.using=!0,this.sub_list={data:e,content:e.content,bottom:i.bottom-o.bottom+o.height}}},clearTimeout:function(t){window.clearTimeout(t)},enter:function(t,e){var n=this;window.clearTimeout(this._enter_timeout),this._enter_timeout=setTimeout((function(){n._enter(t,e)}),100)}},computed:Object(a["a"])({is_edit_mode:function(){return"EditBookmark"===this.$route.name}},Object(c["b"])(["getUniqueID"]),{show_scrollbar:function(){return this.scrollHeight>this.clientHeight},scrollbar_thumb_height:function(){return Math.min(this.clientHeight/this.scrollHeight,1)},scrollbar_thumb_offset:function(){return this.scrollTop*this.scrollbar_thumb_height}}),watch:{is_edit_mode:function(t,e){this.$nextTick(this.update)},bottom:function(){this.update_offset_top()},content:function(t,e){var n=this;t!==e&&(this.scrollTop=0,this.drag_target&&this.inputListener.break(),this.drag_target=!0,this.$nextTick((function(){n.drag_target=null})),this.update_offset_top())},"data.using":function(t,e){!t&&this.sub_list&&(this.sub_list.data.using=!1,this.sub_list=null)},"content.length":function(t,e){this.$nextTick(this.update)}},data:function(){return{clientHeight:0,scrollHeight:0,scrollbar_opacity:1,scrollTop:0,drag_target:null,offsetTop:0,sub_list:null}},props:{data:Object,content:Array,bottom:Number}}),y=b,k=(n("876e"),Object(p["a"])(y,i,o,!1,null,"56785c39",null));e["default"]=k.exports},a686:function(t,e,n){},a7ff:function(t,e,n){},aaa6:function(t,e,n){},abe6:function(t,e,n){"use strict";var i=n("39af"),o=n.n(i);o.a},c5e7:function(t,e,n){"use strict";var i=n("676e"),o=n.n(i);o.a},c6df:function(t,e,n){"use strict";var i=n("aaa6"),o=n.n(i);o.a},d17a:function(t,e,n){},d4e1:function(t,e,n){},dbfd:function(t,e,n){},e0cb:function(t,e,n){"use strict";var i=n("d17a"),o=n.n(i);o.a},e13a:function(t,e,n){},e3dc:function(t,e,n){"use strict";var i=n("dbfd"),o=n.n(i);o.a},ea62:function(t,e,n){"use strict";var i=n("a7ff"),o=n.n(i);o.a},f50b:function(t,e,n){"use strict";var i=n("6112"),o=n.n(i);o.a},f556:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n("cb29");var i,o=n("b85c"),a=n("5530"),s=n("d4ec"),r=n("bee2"),c=n("7e84"),l=n("45eb"),u=n("2caf"),h=n("262e");n("99af"),n("c975"),n("baa5"),n("d81d"),n("13d5"),n("fb6a"),n("a434"),n("a9e3");(function(t){t[t["USE_CHECK"]=1]="USE_CHECK",t[t["FILL_EACHMODEL"]=16]="FILL_EACHMODEL",t[t["USE_OFFSET"]=256]="USE_OFFSET",t[t["USE_EACHOFFSET"]=4096]="USE_EACHOFFSET"})(i||(i={}));var d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s["a"])(this,t),this.options=n,this.model_map=new Array,this.model_list=new Array,this.options.ncols>0||(this.options.ncols=e.reduce((function(t,e){return Math.max(t,(e.col||0)+(e.colspan||1))}),1));var i=this._fill(e,t.FLAGS.USE_CHECK|t.FLAGS.FILL_EACHMODEL);this.append(i)}return Object(r["a"])(t,[{key:"setNCols",value:function(e,n){if(e!==this.options.ncols){this.model_map.splice(0,this.model_map.length);var i=this.model_list.splice(0,this.model_list.length);if(n&&1!==n){var a,s=e-this.options.ncols,r=Object(o["a"])(i);try{for(r.s();!(a=r.n()).done;){var c=a.value;c.col+=s}}catch(v){r.e(v)}finally{r.f()}}this.options.ncols=e;var l,u=Object(o["a"])(i);try{for(u.s();!(l=u.n()).done;){var h=l.value;h.colspan>e&&(h.colspan=e),h.colspan+h.col>e&&(h.col=e-h.colspan)}}catch(v){u.e(v)}finally{u.f()}var d,p=this._fill(i,t.FLAGS.USE_CHECK|t.FLAGS.FILL_EACHMODEL),f=Object(o["a"])(p);try{for(f.s();!(d=f.n()).done;){var _=d.value;this.alloc(_),this.fill(_)}}catch(v){f.e(v)}finally{f.f()}}}},{key:"fill",value:function(e){e instanceof Array||(e=[e]),this._fill(e,t.FLAGS.FILL_EACHMODEL)}},{key:"clear",value:function(t){var e=this.model_list.indexOf(t),n=0;~e&&this.model_list.splice(e,1);while(~(e=this.model_map.indexOf(t)))n++,this.model_map[e]=void 0;return n}},{key:"remove",value:function(t){t instanceof Array||(t=[t]),this._fill(t)}},{key:"move",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e instanceof Array||(e=[e]),this.remove(e),this._fill(e,i|t.FLAGS.FILL_EACHMODEL|t.FLAGS.USE_OFFSET,n)}},{key:"getModel",value:function(t,e){if(t>=0&&e>=0&&t<this.ncols)return this.model_map[t+e*this.ncols]}},{key:"format",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.col,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.row;return t.col=Math.round(Math.max(Math.min(e,this.ncols-t.colspan),0)),t.row=Math.round(Math.max(n,0)),t}},{key:"trim",value:function(){for(var t=Math.ceil(this.model_map.length/this.ncols),e=[],n=1;n<t;n++)for(var i=0;i<this.ncols;i++){var o=n*this.ncols+i,a=this.model_map[o];if(a&&a.row===n){var s=this._pathTest([a],[0,-n-1],a);s>0&&(e.push(a),this.move([a],[0,-s])),i+=a.colspan-1}}return e}},{key:"append",value:function(e){e instanceof Array||(e=[e]);var n,i=Object(o["a"])(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.colspan>this.ncols&&(a.colspan=this.ncols);for(var s=Math.ceil(this.model_map.length/this.ncols),r=0,c=0,l={col:0,row:s,colspan:a.colspan,rowspan:a.rowspan},u=0,h=this.ncols-a.colspan;u<=h;u++){l.col=u;var d=this._pathTest([l],[0,-s-1],l);r<d&&(r=d,c=u)}a.col=c,a.row=s-r,this._fill([a],t.FLAGS.FILL_EACHMODEL)}}catch(p){i.e(p)}finally{i.f()}}},{key:"alloc",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.format({col:e.col,row:e.row,colspan:e.colspan,rowspan:e.rowspan}),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.cover(n),o=arguments.length>3?arguments[3]:void 0,s=i.slice();if(0===i.length)return s;if(o||(o=this.calcWrap(i)),o.colspan+o.rowspan>1.6*(n.colspan+n.rowspan)||!this._compress(n,i,o,e)){i.sort((function(t,e){return t.row-e.row}));for(var r=Object(a["a"])({},n),c=0;c<i.length;c++){var l=i[c];this._compress(r,[l],l,void 0,!1)?i.splice(c--,1):(r.col>l.col&&(r.colspan+=r.col-l.col,r.col=l.col),r.col+r.colspan<l.col+l.colspan&&(r.colspan=l.col+l.colspan-r.col))}if(0===i.length)return s;var u=[],h=[];o=this.calcWrap(i);var d=n.colspan-Math.max(o.col-n.col,0)-Math.max(n.col+n.colspan-o.colspan-o.col,0),p=[{col:Math.max(n.col,o.col),row:n.row,colspan:d,rowspan:0}],f={},_=[new Array(d).fill(n.rowspan)];while(p.length){var v=[],m={},g=[];for(var w in f)f[w].sort((function(t,e){return t.row-e.row}));for(var b=0;b<p.length;b++){for(var y=p[b],k=_[b],x=y.col,O=x+y.colspan;x<O;x++){var E=f[x];if(E){for(var S=0,T=0;T<E.length-1;T++){var C=E[T];if(!(C.row<y.row))break;S+=E[T+1].row-(C.row+C.rowspan)}k[x-y.col]-=S}}var $=Math.max.apply(Number,k);if($>0){_[b]=$;var N=u.indexOf(y);if(-1===N)N=u.length,u.push(y),h.push($);else{if(h[N]>=$)continue;h[N]=$}}else p.splice(b,1),_.splice(b,1),b--}for(var M=0;M<p.length;M++){var A=p[M],I=_[M];t:for(var j=A.col,P=j+A.colspan;j<P;j++)for(var L=A.row+A.rowspan,U=L+I;L<U;L++){var R=this.model_map[j+L*this.ncols];if(R){var D=v.indexOf(R),B=void 0,H=U-L+Math.max(A.row-R.row,0);if(-1===D){var z=u.indexOf(R);if(z>=0&&h[z]>=H)continue t;v.push(R),g.push(B=new Array(R.colspan).fill(0));var F=m[j]||(m[j]=[]);F.push({row:R.row,rowspan:R.rowspan})}else B=g[D];B[j-R.col]=Math.max(B[j-R.col],H);break}}}p=v,f=m,_=g}u.splice(0,1),h.splice(0,1),this.move(u,h.map((function(t){return[0,t]})),t.FLAGS.USE_EACHOFFSET),s=s.concat(u)}return s}},{key:"cover",value:function(t){for(var e=[],n=t.col,i=t.row,o=0;o<t.rowspan;o++)for(var a=0;a<t.colspan;a++){var s=this.model_map[a+n+(o+i)*this.ncols];if(void 0!==s){~e.indexOf(s)||e.push(s);var r=s.colspan+s.col-1;a+n<r&&(a=r-n)}}return e}},{key:"calcWrap",value:function(t){for(var e={col:t[0].col,row:t[0].row,colspan:t[0].colspan,rowspan:t[0].rowspan},n=1;n<t.length;n++){var i=t[n];e.col>i.col&&(e.colspan+=e.col-i.col,e.col=i.col),e.row>i.row&&(e.rowspan+=e.row-i.row,e.row=i.row),e.colspan+e.col<i.col+i.colspan&&(e.colspan+=i.col+i.colspan-e.col-e.colspan),e.rowspan+e.row<i.row+i.rowspan&&(e.rowspan+=i.row+i.rowspan-e.row-e.rowspan)}return e}},{key:"calcOffset",value:function(t,e){return{l:t.col-(e.col+e.colspan),r:t.col+t.colspan-e.col,t:t.row-(e.row+e.rowspan),b:t.row+t.rowspan-e.row}}},{key:"_fill",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,o=t.FLAGS,a=n&o.USE_CHECK?[]:void 0,s=this.model_map,r=this.model_list,c=this.ncols;t:for(var l=0;l<e.length;l++){var u=e[l];if(n&o.USE_CHECK&&(isFinite(u.colspan)||(u.colspan=1),isFinite(u.rowspan)||(u.rowspan=1),isNaN(u.col+u.row)||u.col<0||u.col+u.colspan>c))a.push(u);else{var h=r.indexOf(u);if(n&o.FILL_EACHMODEL){if(-1!==h)continue;r.push(u)}else h>=0&&r.splice(h,1);n&o.USE_EACHOFFSET?(u.col+=i[l][0],u.row+=i[l][1]):n&o.USE_OFFSET&&(u.col+=i[0],u.row+=i[1]);for(var d=u.col,p=u.row,f=u.colspan,_=u.rowspan,v=0;v<_;v++)for(var m=0;m<f;m++){var g=m+d+(v+p)*c;if(n&o.USE_CHECK&&void 0!==s[g]){do{while(m--)s[m+d+(v+p)*c]=void 0;m=f}while(v--);n&o.FILL_EACHMODEL&&r.pop(),a.push(u);continue t}s[g]=n&o.FILL_EACHMODEL?u:i}}}return a}},{key:"_pathTest",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.calcWrap(t),i=0|e[0],a=0|e[1],s=0,r=0,c=0,l=i&&i/Math.abs(i),u=a&&a/Math.abs(a);while(s!==i||r!==a){if(s!==i?s+=l:r+=u,n.col+s<0||n.col+s+n.colspan>this.ncols||n.row+r<0)return c;var h,d=Object(o["a"])(t);try{for(d.s();!(h=d.n()).done;)for(var p=h.value,f=p.row,_=f+p.rowspan;f<_;f++)for(var v=p.col,m=v+p.colspan;v<m;v++){var g=v+s+(f+r)*this.ncols;if(this.model_map[g]&&-1===t.indexOf(this.model_map[g]))return c}}catch(w){d.e(w)}finally{d.f()}c+=1}return!0}},{key:"_compress",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.cover(t),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.calcWrap(e),i=arguments.length>3?arguments[3]:void 0,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=n.colspan/n.rowspan,s=t.rowspan/t.colspan,r=(a+s)/4;a=r+a/2,s=r+s/2;var c=this.calcOffset(t,n),l=i?this.calcOffset(i,n):c,u=[Math.abs(s*l.l),[c.l,0]],h=[Math.abs(s*l.r),[c.r,0],u];u.push(h),h.push(u);var d,p=[Math.abs(a*l.t),[0,c.t]];o&&(d=[Math.abs(a*l.b),[0,c.b]],p.push(d),d.push(p));for(var f=(o?[u,h,p,d]:[u,h,p]).sort((function(t,e){return t[0]-e[0]})),_=0;_<f.length;_++){var v=f.lastIndexOf(f[_][2]);if(v>_&&(f.splice(v,1),f.splice(_+1,0,f[_][2])),!0===this._pathTest(e,f[_][1],n))return this.move(e,f[_][1]),!0}return!1}},{key:"ncols",get:function(){return this.options.ncols},set:function(t){this.setNCols(t)}}]),t}();d.FLAGS=i;var p=d,f=n("71d3"),_=function(t){Object(h["a"])(n,t);var e=Object(u["a"])(n);function n(t,i){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s["a"])(this,n),o=e.call(this,i,r),o.vessel=t,o.inputListener=null,o._client_width=0,o.resize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.options.ncols,e=arguments.length>1?arguments[1]:void 0,n=o.clientWidth;t===o.ncols&&o._client_width===n||(o.setNCols(t,e),o._client_width=n,o._update(o.model_list))},o.dragStart=function(t,e){var n=o.vessel.getBoundingClientRect(),i=e.clientX-n.left,a=e.clientY-n.top;return o.target_box=o._get_box(i,a,t,e),!!(!o.target_box||o.options.onPick&&o.options.onPick(t,e,o.target_box))||(t.preventDefault(),o.target_box.dragging=!0,void o.remove(o.target_box))},o.dragMove=function(t,e,n){if(o.target_box.left+=e[0],o.target_box.top+=e[1],o._stay_timeout&&(window.clearTimeout(o._stay_timeout),o._stay_timeout=null),o.options.onMove&&o.options.onMove(t,n,o.target_box))return o.inputListener.break(),void(o.target_box=null);o._e=t,o._t=n,o._stay_timeout=window.setTimeout(o.put,300)},o.dragEnd=function(t,e){o._stay_timeout&&window.clearTimeout(o._stay_timeout),o._e=t,o._t=e,o.put(!0)},o.put=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.target_box,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o._e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o._t;o._stay_timeout=void 0;var s=o.cellSize,r=e.space||o.space,c=(e.left-r.left)/s,l=(e.top-r.top)/s,u={col:c,row:l,colspan:e.colspan,rowspan:e.rowspan},h=o.format(Object(a["a"])({},u)),d=o.cover(h),p=t?o.options.onDrop:o.options.onStay;if(p&&p(n,i,e,d))return t||o.inputListener.break(),void(o.target_box=null);if(d.length){var f=o.calcWrap(d);h.col===f.col&&h.row===f.row&&e.colspan===f.colspan&&e.rowspan===f.rowspan&&Math.abs(u.col-f.col)+Math.abs(u.row-f.row)<.1/Math.sqrt(s/60)&&Math.abs(e.col-f.col)/e.colspan+Math.abs(e.row-f.row)/e.rowspan>1?o.move(d,[e.col-f.col,e.row-f.row]):o.alloc(u,h,d,f)}o.format(e,c,l),!0===t&&(e.dragging=!1,o.fill(e),o._update([e]),o.target_box=null)},o.vessel=t,o.inputListener=new f(t,{dragStart:o.dragStart,dragMove:o.dragMove,dragEnd:o.dragEnd}),o.activate(),o}return Object(r["a"])(n,[{key:"disable",value:function(){this.inputListener.disable()}},{key:"activate",value:function(){this.resize(),this.inputListener.activate()}},{key:"remove",value:function(t){Object(l["a"])(Object(c["a"])(n.prototype),"remove",this).call(this,t)}},{key:"add",value:function(t){t instanceof Array||(t=[t]);var e,n=Object(o["a"])(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.col>=0&&i.col+i.colspan<=this.ncols&&i.row>=0?(this.alloc(i),this.fill(i)):this.append(i)}}catch(a){n.e(a)}finally{n.f()}this._update(t)}},{key:"update",value:function(t,e){if(t){if(Object(l["a"])(Object(c["a"])(n.prototype),"clear",this).call(this,t),e instanceof Object)for(var i in e)t[i]=e[i];this.alloc(t),this.fill(t),this._update(t)}else this._update(this.model_list)}},{key:"_update",value:function(t){t instanceof Array||(t=[t]);var e,n,i,a,s,r=this.cellSize,c=Object(o["a"])(t);try{for(c.s();!(s=c.n()).done;){var l=s.value,u=l.space||this.space,h=u.left,d=void 0===h?0:h,p=u.right,f=void 0===p?0:p,_=u.top,v=void 0===_?0:_,m=u.bottom,g=void 0===m?0:m;e=r*l.col+d,n=r*l.row+v,i=r*l.colspan-d-f,a=r*l.rowspan-v-g,e!==l.left&&(l.left=e),n!==l.top&&(l.top=n),i!==l.width&&(l.width=i),a!==l.height&&(l.height=a)}}catch(w){c.e(w)}finally{c.f()}}},{key:"_get_box",value:function(t,e,n,i){var o=this.cellSize,a=this.getModel(t/o|0,e/o|0);function s(t,e,n){return n>=0?e<t-n:e>=t+n&&e<t}if(a){var r=a.capture||this.capture;if(r instanceof Function){var c=r(n,i,a);return!0===c?a:!1===c?void 0:c}var l=a.space||this.space,u=l.top,h=void 0===u?0:u,d=l.right,p=void 0===d?0:d,f=l.bottom,_=void 0===f?0:f,v=l.left,m=void 0===v?0:v,g=r.top,w=void 0===g?0:g,b=r.right,y=void 0===b?0:b,k=r.bottom,x=void 0===k?0:k,O=r.left,E=void 0===O?0:O,S=a.col*o+m,T=a.row*o+h,C=a.colspan*o-p-m,$=a.rowspan*o-h-_,N=t-S-C/2,M=e-T-$/2,A=Math.sqrt(Math.pow(N,2)+Math.pow(M,2)),I=Math.atan2(M,N),j=2*Math.atan(C/$),P=Math.PI-j,L=P/2,U=Math.PI/2;switch(!0){case I<-L&&I>-j-L:return s($/2,A*Math.cos(U+I),w)&&a;case Math.abs(I)<=L:return s(C/2,A*Math.cos(I),y)&&a;case I>L&&I<L+j:return s($/2,Math.abs(A*Math.cos(U+I)),x)&&a;case Math.abs(I)>=j+L:return s(C/2,Math.abs(A*Math.cos(I)),E)&&a}}}},{key:"receive",value:function(t,e,n){this.target_box&&(window.clearTimeout(this._stay_timeout),this.put(!0),this.inputListener.break()),this.target_box=n,t&&e?(this.inputListener.addPoint(e),this._stay_timeout=window.setTimeout(this.put,300)):this.put(!0)}},{key:"move",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Object(l["a"])(Object(c["a"])(n.prototype),"move",this).call(this,t,e,i);return this._update(t),o}},{key:"capture",get:function(){return this.options.capture||n.capture}},{key:"space",get:function(){return this.options.space||n.space}},{key:"clientWidth",get:function(){return isFinite(this.options.client_width)?this.options.client_width:this.vessel.clientWidth}},{key:"cellSize",get:function(){return this.clientWidth/this.ncols}}]),n}(p);_.space={top:0,right:0,bottom:0,left:0},_.capture={top:0,right:0,bottom:0,left:0},_.InputListener=f,_.MutexModel=p;try{window.MutexBox=_}catch(v){}e["b"]=_},f732:function(t,e,n){"use strict";var i=n("9bc3"),o=n.n(i);o.a},f738:function(t,e,n){"use strict";var i=n("6b36"),o=n.n(i);o.a},fac5:function(t,e,n){}});
}).toString()